import{J as dr,j as Es}from"./index-da14ef80.js";import{u as Ss,i as Ps}from"./action-6c9f0bf6.js";import{S as Zt,c as Os,b as ks}from"./index-a9237573.js";import{bG as Yt,a4 as sn,k as Ot,aY as wr,aG as _e,ay as we,W as pt,U as ze,b1 as Ee,a2 as fe,V as et,Q as xr,bu as pr,b0 as Ts,X as on,x as ce,C as Ns,a1 as hn,D as ya,I as xt,aE as Ur}from"./history-6b8b5fef.js";import{c as js,a as Rs}from"./_commonjsHelpers-87174ba5.js";import{f as Wr,s as Cs,b as Is}from"./index-79dd609f.js";import{c as Ds,t as As}from"./nameConvert-75d645d2.js";import{U as Fs}from"./util-68339617.js";import"./___vite-browser-external_commonjs-proxy-d2112d3c.js";const Ms=[{label:$t("code_indent_width_null"),value:0},{label:$t("code_indent_width",[2]),value:2},{label:$t("code_indent_width",[4]),value:4},{label:$t("code_indent_width",[6]),value:6},{label:$t("code_indent_width",[8]),value:8}],Vs=Ms,Us=["Java","Dart","C#","Protobuf","Go","PHP"],zs=Us,Ls=[{label:$t("json_json_path"),value:"json_path"},{label:$t("json_jmes_path"),value:"jmes_path"}],Ks=(e,t,{class_name:r="",package_name:n="",is_inline:a=!0}={})=>new Promise(async(s,u)=>{try{if(t=t.trim(),t==="")return s("");if(e==="PHP"){const d=await Yt(()=>import("./index-cb0a53ab.js"),["./index-cb0a53ab.js","./nameConvert-75d645d2.js","./history-6b8b5fef.js","./_commonjsHelpers-87174ba5.js","./history-6570b0f3.css","./index-da14ef80.js"],import.meta.url).then(f=>f.convert);return s(d(t,{className:r,namespace:n}))}if(e==="Java"){const d=await Yt(()=>import("./java-431ab0d4.js"),["./java-431ab0d4.js","./nameConvert-75d645d2.js","./index-da14ef80.js"],import.meta.url).then(f=>f.convert);return s(d(t,r,n))}if(e==="C#"){const d=await Yt(()=>import("./cSharp-236ae361.js"),["./cSharp-236ae361.js","./index-da14ef80.js"],import.meta.url).then(f=>f.convert);return s(d(t,r,n))}if(e==="Dart"){const d=await Yt(()=>import("./dart-1b5c1597.js"),["./dart-1b5c1597.js","./index-da14ef80.js"],import.meta.url).then(f=>f.convert);return s(d(t,r))}if(e==="Go"){const d=await Yt(()=>import("./go-c719971d.js"),["./go-c719971d.js","./index-da14ef80.js"],import.meta.url).then(f=>f.convert);return s(d(t,r,n))}if(e==="Protobuf"){const f=(await Yt(()=>import("./protobuf-392fe1e6.js"),["./protobuf-392fe1e6.js","./index-da14ef80.js"],import.meta.url).then(p=>p.convert))(t,{inline:a,googleProtobufTimestamp:!1,mergeSimilarObjects:!1});if(f.error!=="")throw new Error(f.error);return s(f.success)}}catch(d){u($error(d))}return s("")}),qs=sn({__name:"ToObject",props:{lang:{type:String,default:"java"},json:{type:Object,default:()=>Zt.empty()},height:{type:Number,default:0}},emits:["success"],setup(e,{emit:t}){const r=e;let n=Ot("pag"),a=Ot("RootName"),s=Ot(!0),u=Ot("");wr(()=>({land:r.lang,json:r.json,package_name:n.value,class_name:a.value,is_inline:s.value}),({land:p,json:c,package_name:m,class_name:j,is_inline:v})=>{if(c.isError()){u.value=c.error();return}if(c.isEmpty()){u.value="";return}Ks(p,c.toJson(),{package_name:m,class_name:j,is_inline:v}).then(_=>{u.value=_}).catch(_=>{u.value=_})},{immediate:!0,deep:!0});let d=Ot(100);const f=p=>{d.value=p};return(p,c)=>{const m=_e("Input"),j=_e("Align"),v=_e("Bool"),_=_e("Editor"),O=_e("HeightResize");return we(),pt("div",null,[e.lang!=="Protobuf"?(we(),ze(j,{key:0,direction:"vertical",class:"ctool-json-object",bottom:"default"},{default:Ee(()=>[fe(m,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=E=>n.value=E),label:"namespace/package"},null,8,["modelValue"]),fe(m,{modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=E=>a.value=E),label:"class/struct"},null,8,["modelValue"])]),_:1})):et("",!0),fe(O,{onResize:f,"father-height":e.height,ignore:"",append:[".ctool-json-object"]},{default:Ee(()=>[fe(_,{"model-value":u.value,placeholder:`${e.lang} Object ${p.$t("main_ui_output")}`,lang:e.lang,height:`${d.value}px`},{default:Ee(()=>[e.lang==="Protobuf"?(we(),ze(v,{key:0,size:"small",modelValue:s.value,"onUpdate:modelValue":c[2]||(c[2]=E=>s.value=E),border:"",label:p.$t("json_inline")},null,8,["modelValue","label"])):et("",!0)]),_:1},8,["model-value","placeholder","lang","height"])]),_:1},8,["father-height","append"])])}}});var Qr={},Hs={get exports(){return Qr},set exports(e){Qr=e}},Ua={},rt={},tr={},Or={},oe={},Er={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(I){if(super(),!e.IDENTIFIER.test(I))throw new Error("CodeGen: name must be a valid identifier");this.str=I}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(I){super(),this._items=typeof I=="string"?[I]:I}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const I=this._items[0];return I===""||I==='""'}get str(){var I;return(I=this._str)!==null&&I!==void 0?I:this._str=this._items.reduce((T,F)=>`${T}${F}`,"")}get names(){var I;return(I=this._names)!==null&&I!==void 0?I:this._names=this._items.reduce((T,F)=>(F instanceof r&&(T[F.str]=(T[F.str]||0)+1),T),{})}}e._Code=n,e.nil=new n("");function a($,...I){const T=[$[0]];let F=0;for(;F<I.length;)d(T,I[F]),T.push($[++F]);return new n(T)}e._=a;const s=new n("+");function u($,...I){const T=[v($[0])];let F=0;for(;F<I.length;)T.push(s),d(T,I[F]),T.push(s,v($[++F]));return f(T),new n(T)}e.str=u;function d($,I){I instanceof n?$.push(...I._items):I instanceof r?$.push(I):$.push(m(I))}e.addCodeArg=d;function f($){let I=1;for(;I<$.length-1;){if($[I]===s){const T=p($[I-1],$[I+1]);if(T!==void 0){$.splice(I-1,3,T);continue}$[I++]="+"}I++}}function p($,I){if(I==='""')return $;if($==='""')return I;if(typeof $=="string")return I instanceof r||$[$.length-1]!=='"'?void 0:typeof I!="string"?`${$.slice(0,-1)}${I}"`:I[0]==='"'?$.slice(0,-1)+I.slice(1):void 0;if(typeof I=="string"&&I[0]==='"'&&!($ instanceof r))return`"${$}${I.slice(1)}`}function c($,I){return I.emptyStr()?$:$.emptyStr()?I:u`${$}${I}`}e.strConcat=c;function m($){return typeof $=="number"||typeof $=="boolean"||$===null?$:v(Array.isArray($)?$.join(","):$)}function j($){return new n(v($))}e.stringify=j;function v($){return JSON.stringify($).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=v;function _($){return typeof $=="string"&&e.IDENTIFIER.test($)?new n(`.${$}`):a`[${$}]`}e.getProperty=_;function O($){if(typeof $=="string"&&e.IDENTIFIER.test($))return new n(`${$}`);throw new Error(`CodeGen: invalid export name: ${$}, use explicit $id name mapping`)}e.getEsmExportName=O;function E($){return new n($.toString())}e.regexpCode=E})(Er);var gn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Er;class r extends Error{constructor(p){super(`CodeGen: "code" for ${p} not defined`),this.value=p.value}}var n;(function(f){f[f.Started=0]="Started",f[f.Completed=1]="Completed"})(n=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:p,parent:c}={}){this._names={},this._prefixes=p,this._parent=c}toName(p){return p instanceof t.Name?p:this.name(p)}name(p){return new t.Name(this._newName(p))}_newName(p){const c=this._names[p]||this._nameGroup(p);return`${p}${c.index++}`}_nameGroup(p){var c,m;if(!((m=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||m===void 0)&&m.has(p)||this._prefixes&&!this._prefixes.has(p))throw new Error(`CodeGen: prefix "${p}" is not allowed in this scope`);return this._names[p]={prefix:p,index:0}}}e.Scope=a;class s extends t.Name{constructor(p,c){super(c),this.prefix=p}setValue(p,{property:c,itemIndex:m}){this.value=p,this.scopePath=(0,t._)`.${new t.Name(c)}[${m}]`}}e.ValueScopeName=s;const u=(0,t._)`\n`;class d extends a{constructor(p){super(p),this._values={},this._scope=p.scope,this.opts={...p,_n:p.lines?u:t.nil}}get(){return this._scope}name(p){return new s(p,this._newName(p))}value(p,c){var m;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const j=this.toName(p),{prefix:v}=j,_=(m=c.key)!==null&&m!==void 0?m:c.ref;let O=this._values[v];if(O){const I=O.get(_);if(I)return I}else O=this._values[v]=new Map;O.set(_,j);const E=this._scope[v]||(this._scope[v]=[]),$=E.length;return E[$]=c.ref,j.setValue(c,{property:v,itemIndex:$}),j}getValue(p,c){const m=this._values[p];if(m)return m.get(c)}scopeRefs(p,c=this._values){return this._reduceValues(c,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,t._)`${p}${m.scopePath}`})}scopeCode(p=this._values,c,m){return this._reduceValues(p,j=>{if(j.value===void 0)throw new Error(`CodeGen: name "${j}" has no value`);return j.value.code},c,m)}_reduceValues(p,c,m={},j){let v=t.nil;for(const _ in p){const O=p[_];if(!O)continue;const E=m[_]=m[_]||new Map;O.forEach($=>{if(E.has($))return;E.set($,n.Started);let I=c($);if(I){const T=this.opts.es5?e.varKinds.var:e.varKinds.const;v=(0,t._)`${v}${T} ${$} = ${I};${this.opts._n}`}else if(I=j==null?void 0:j($))v=(0,t._)`${v}${I}${this.opts._n}`;else throw new r($);E.set($,n.Completed)})}return v}}e.ValueScope=d})(gn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Er,r=gn;var n=Er;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var a=gn;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(o,g){return this}}class u extends s{constructor(o,g,A){super(),this.varKind=o,this.name=g,this.rhs=A}render({es5:o,_n:g}){const A=o?r.varKinds.var:this.varKind,q=this.rhs===void 0?"":` = ${this.rhs}`;return`${A} ${this.name}${q};`+g}optimizeNames(o,g){if(o[this.name.str])return this.rhs&&(this.rhs=pe(this.rhs,o,g)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class d extends s{constructor(o,g,A){super(),this.lhs=o,this.rhs=g,this.sideEffects=A}render({_n:o}){return`${this.lhs} = ${this.rhs};`+o}optimizeNames(o,g){if(!(this.lhs instanceof t.Name&&!o[this.lhs.str]&&!this.sideEffects))return this.rhs=pe(this.rhs,o,g),this}get names(){const o=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Ne(o,this.rhs)}}class f extends d{constructor(o,g,A,q){super(o,A,q),this.op=g}render({_n:o}){return`${this.lhs} ${this.op}= ${this.rhs};`+o}}class p extends s{constructor(o){super(),this.label=o,this.names={}}render({_n:o}){return`${this.label}:`+o}}class c extends s{constructor(o){super(),this.label=o,this.names={}}render({_n:o}){return`break${this.label?` ${this.label}`:""};`+o}}class m extends s{constructor(o){super(),this.error=o}render({_n:o}){return`throw ${this.error};`+o}get names(){return this.error.names}}class j extends s{constructor(o){super(),this.code=o}render({_n:o}){return`${this.code};`+o}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(o,g){return this.code=pe(this.code,o,g),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class v extends s{constructor(o=[]){super(),this.nodes=o}render(o){return this.nodes.reduce((g,A)=>g+A.render(o),"")}optimizeNodes(){const{nodes:o}=this;let g=o.length;for(;g--;){const A=o[g].optimizeNodes();Array.isArray(A)?o.splice(g,1,...A):A?o[g]=A:o.splice(g,1)}return o.length>0?this:void 0}optimizeNames(o,g){const{nodes:A}=this;let q=A.length;for(;q--;){const H=A[q];H.optimizeNames(o,g)||(Je(o,H.names),A.splice(q,1))}return A.length>0?this:void 0}get names(){return this.nodes.reduce((o,g)=>Z(o,g.names),{})}}class _ extends v{render(o){return"{"+o._n+super.render(o)+"}"+o._n}}class O extends v{}class E extends _{}E.kind="else";class $ extends _{constructor(o,g){super(g),this.condition=o}render(o){let g=`if(${this.condition})`+super.render(o);return this.else&&(g+="else "+this.else.render(o)),g}optimizeNodes(){super.optimizeNodes();const o=this.condition;if(o===!0)return this.nodes;let g=this.else;if(g){const A=g.optimizeNodes();g=this.else=Array.isArray(A)?new E(A):A}if(g)return o===!1?g instanceof $?g:g.nodes:this.nodes.length?this:new $(Ge(o),g instanceof $?[g]:g.nodes);if(!(o===!1||!this.nodes.length))return this}optimizeNames(o,g){var A;if(this.else=(A=this.else)===null||A===void 0?void 0:A.optimizeNames(o,g),!!(super.optimizeNames(o,g)||this.else))return this.condition=pe(this.condition,o,g),this}get names(){const o=super.names;return Ne(o,this.condition),this.else&&Z(o,this.else.names),o}}$.kind="if";class I extends _{}I.kind="for";class T extends I{constructor(o){super(),this.iteration=o}render(o){return`for(${this.iteration})`+super.render(o)}optimizeNames(o,g){if(super.optimizeNames(o,g))return this.iteration=pe(this.iteration,o,g),this}get names(){return Z(super.names,this.iteration.names)}}class F extends I{constructor(o,g,A,q){super(),this.varKind=o,this.name=g,this.from=A,this.to=q}render(o){const g=o.es5?r.varKinds.var:this.varKind,{name:A,from:q,to:H}=this;return`for(${g} ${A}=${q}; ${A}<${H}; ${A}++)`+super.render(o)}get names(){const o=Ne(super.names,this.from);return Ne(o,this.to)}}class z extends I{constructor(o,g,A,q){super(),this.loop=o,this.varKind=g,this.name=A,this.iterable=q}render(o){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(o)}optimizeNames(o,g){if(super.optimizeNames(o,g))return this.iterable=pe(this.iterable,o,g),this}get names(){return Z(super.names,this.iterable.names)}}class S extends _{constructor(o,g,A){super(),this.name=o,this.args=g,this.async=A}render(o){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(o)}}S.kind="func";class N extends v{render(o){return"return "+super.render(o)}}N.kind="return";class V extends _{render(o){let g="try"+super.render(o);return this.catch&&(g+=this.catch.render(o)),this.finally&&(g+=this.finally.render(o)),g}optimizeNodes(){var o,g;return super.optimizeNodes(),(o=this.catch)===null||o===void 0||o.optimizeNodes(),(g=this.finally)===null||g===void 0||g.optimizeNodes(),this}optimizeNames(o,g){var A,q;return super.optimizeNames(o,g),(A=this.catch)===null||A===void 0||A.optimizeNames(o,g),(q=this.finally)===null||q===void 0||q.optimizeNames(o,g),this}get names(){const o=super.names;return this.catch&&Z(o,this.catch.names),this.finally&&Z(o,this.finally.names),o}}class x extends _{constructor(o){super(),this.error=o}render(o){return`catch(${this.error})`+super.render(o)}}x.kind="catch";class L extends _{render(o){return"finally"+super.render(o)}}L.kind="finally";class J{constructor(o,g={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...g,_n:g.lines?`
`:""},this._extScope=o,this._scope=new r.Scope({parent:o}),this._nodes=[new O]}toString(){return this._root.render(this.opts)}name(o){return this._scope.name(o)}scopeName(o){return this._extScope.name(o)}scopeValue(o,g){const A=this._extScope.value(o,g);return(this._values[A.prefix]||(this._values[A.prefix]=new Set)).add(A),A}getScopeValue(o,g){return this._extScope.getValue(o,g)}scopeRefs(o){return this._extScope.scopeRefs(o,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(o,g,A,q){const H=this._scope.toName(g);return A!==void 0&&q&&(this._constants[H.str]=A),this._leafNode(new u(o,H,A)),H}const(o,g,A){return this._def(r.varKinds.const,o,g,A)}let(o,g,A){return this._def(r.varKinds.let,o,g,A)}var(o,g,A){return this._def(r.varKinds.var,o,g,A)}assign(o,g,A){return this._leafNode(new d(o,g,A))}add(o,g){return this._leafNode(new f(o,e.operators.ADD,g))}code(o){return typeof o=="function"?o():o!==t.nil&&this._leafNode(new j(o)),this}object(...o){const g=["{"];for(const[A,q]of o)g.length>1&&g.push(","),g.push(A),(A!==q||this.opts.es5)&&(g.push(":"),(0,t.addCodeArg)(g,q));return g.push("}"),new t._Code(g)}if(o,g,A){if(this._blockNode(new $(o)),g&&A)this.code(g).else().code(A).endIf();else if(g)this.code(g).endIf();else if(A)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(o){return this._elseNode(new $(o))}else(){return this._elseNode(new E)}endIf(){return this._endBlockNode($,E)}_for(o,g){return this._blockNode(o),g&&this.code(g).endFor(),this}for(o,g){return this._for(new T(o),g)}forRange(o,g,A,q,H=this.opts.es5?r.varKinds.var:r.varKinds.let){const te=this._scope.toName(o);return this._for(new F(H,te,g,A),()=>q(te))}forOf(o,g,A,q=r.varKinds.const){const H=this._scope.toName(o);if(this.opts.es5){const te=g instanceof t.Name?g:this.var("_arr",g);return this.forRange("_i",0,(0,t._)`${te}.length`,ae=>{this.var(H,(0,t._)`${te}[${ae}]`),A(H)})}return this._for(new z("of",q,H,g),()=>A(H))}forIn(o,g,A,q=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(o,(0,t._)`Object.keys(${g})`,A);const H=this._scope.toName(o);return this._for(new z("in",q,H,g),()=>A(H))}endFor(){return this._endBlockNode(I)}label(o){return this._leafNode(new p(o))}break(o){return this._leafNode(new c(o))}return(o){const g=new N;if(this._blockNode(g),this.code(o),g.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(N)}try(o,g,A){if(!g&&!A)throw new Error('CodeGen: "try" without "catch" and "finally"');const q=new V;if(this._blockNode(q),this.code(o),g){const H=this.name("e");this._currNode=q.catch=new x(H),g(H)}return A&&(this._currNode=q.finally=new L,this.code(A)),this._endBlockNode(x,L)}throw(o){return this._leafNode(new m(o))}block(o,g){return this._blockStarts.push(this._nodes.length),o&&this.code(o).endBlock(g),this}endBlock(o){const g=this._blockStarts.pop();if(g===void 0)throw new Error("CodeGen: not in self-balancing block");const A=this._nodes.length-g;if(A<0||o!==void 0&&A!==o)throw new Error(`CodeGen: wrong number of nodes: ${A} vs ${o} expected`);return this._nodes.length=g,this}func(o,g=t.nil,A,q){return this._blockNode(new S(o,g,A)),q&&this.code(q).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(o=1){for(;o-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(o){return this._currNode.nodes.push(o),this}_blockNode(o){this._currNode.nodes.push(o),this._nodes.push(o)}_endBlockNode(o,g){const A=this._currNode;if(A instanceof o||g&&A instanceof g)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${g?`${o.kind}/${g.kind}`:o.kind}"`)}_elseNode(o){const g=this._currNode;if(!(g instanceof $))throw new Error('CodeGen: "else" without "if"');return this._currNode=g.else=o,this}get _root(){return this._nodes[0]}get _currNode(){const o=this._nodes;return o[o.length-1]}set _currNode(o){const g=this._nodes;g[g.length-1]=o}}e.CodeGen=J;function Z(k,o){for(const g in o)k[g]=(k[g]||0)+(o[g]||0);return k}function Ne(k,o){return o instanceof t._CodeOrName?Z(k,o.names):k}function pe(k,o,g){if(k instanceof t.Name)return A(k);if(!q(k))return k;return new t._Code(k._items.reduce((H,te)=>(te instanceof t.Name&&(te=A(te)),te instanceof t._Code?H.push(...te._items):H.push(te),H),[]));function A(H){const te=g[H.str];return te===void 0||o[H.str]!==1?H:(delete o[H.str],te)}function q(H){return H instanceof t._Code&&H._items.some(te=>te instanceof t.Name&&o[te.str]===1&&g[te.str]!==void 0)}}function Je(k,o){for(const g in o)k[g]=(k[g]||0)-(o[g]||0)}function Ge(k){return typeof k=="boolean"||typeof k=="number"||k===null?!k:(0,t._)`!${U(k)}`}e.not=Ge;const Ye=P(e.operators.AND);function nt(...k){return k.reduce(Ye)}e.and=nt;const xe=P(e.operators.OR);function K(...k){return k.reduce(xe)}e.or=K;function P(k){return(o,g)=>o===t.nil?g:g===t.nil?o:(0,t._)`${U(o)} ${k} ${U(g)}`}function U(k){return k instanceof t.Name?k:(0,t._)`(${k})`}})(oe);var de={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=oe,r=Er;function n(S){const N={};for(const V of S)N[V]=!0;return N}e.toHash=n;function a(S,N){return typeof N=="boolean"?N:Object.keys(N).length===0?!0:(s(S,N),!u(N,S.self.RULES.all))}e.alwaysValidSchema=a;function s(S,N=S.schema){const{opts:V,self:x}=S;if(!V.strictSchema||typeof N=="boolean")return;const L=x.RULES.keywords;for(const J in N)L[J]||z(S,`unknown keyword: "${J}"`)}e.checkUnknownRules=s;function u(S,N){if(typeof S=="boolean")return!S;for(const V in S)if(N[V])return!0;return!1}e.schemaHasRules=u;function d(S,N){if(typeof S=="boolean")return!S;for(const V in S)if(V!=="$ref"&&N.all[V])return!0;return!1}e.schemaHasRulesButRef=d;function f({topSchemaRef:S,schemaPath:N},V,x,L){if(!L){if(typeof V=="number"||typeof V=="boolean")return V;if(typeof V=="string")return(0,t._)`${V}`}return(0,t._)`${S}${N}${(0,t.getProperty)(x)}`}e.schemaRefOrVal=f;function p(S){return j(decodeURIComponent(S))}e.unescapeFragment=p;function c(S){return encodeURIComponent(m(S))}e.escapeFragment=c;function m(S){return typeof S=="number"?`${S}`:S.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=m;function j(S){return S.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=j;function v(S,N){if(Array.isArray(S))for(const V of S)N(V);else N(S)}e.eachItem=v;function _({mergeNames:S,mergeToName:N,mergeValues:V,resultToName:x}){return(L,J,Z,Ne)=>{const pe=Z===void 0?J:Z instanceof t.Name?(J instanceof t.Name?S(L,J,Z):N(L,J,Z),Z):J instanceof t.Name?(N(L,Z,J),J):V(J,Z);return Ne===t.Name&&!(pe instanceof t.Name)?x(L,pe):pe}}e.mergeEvaluated={props:_({mergeNames:(S,N,V)=>S.if((0,t._)`${V} !== true && ${N} !== undefined`,()=>{S.if((0,t._)`${N} === true`,()=>S.assign(V,!0),()=>S.assign(V,(0,t._)`${V} || {}`).code((0,t._)`Object.assign(${V}, ${N})`))}),mergeToName:(S,N,V)=>S.if((0,t._)`${V} !== true`,()=>{N===!0?S.assign(V,!0):(S.assign(V,(0,t._)`${V} || {}`),E(S,V,N))}),mergeValues:(S,N)=>S===!0?!0:{...S,...N},resultToName:O}),items:_({mergeNames:(S,N,V)=>S.if((0,t._)`${V} !== true && ${N} !== undefined`,()=>S.assign(V,(0,t._)`${N} === true ? true : ${V} > ${N} ? ${V} : ${N}`)),mergeToName:(S,N,V)=>S.if((0,t._)`${V} !== true`,()=>S.assign(V,N===!0?!0:(0,t._)`${V} > ${N} ? ${V} : ${N}`)),mergeValues:(S,N)=>S===!0?!0:Math.max(S,N),resultToName:(S,N)=>S.var("items",N)})};function O(S,N){if(N===!0)return S.var("props",!0);const V=S.var("props",(0,t._)`{}`);return N!==void 0&&E(S,V,N),V}e.evaluatedPropsToName=O;function E(S,N,V){Object.keys(V).forEach(x=>S.assign((0,t._)`${N}${(0,t.getProperty)(x)}`,!0))}e.setEvaluated=E;const $={};function I(S,N){return S.scopeValue("func",{ref:N,code:$[N.code]||($[N.code]=new r._Code(N.code))})}e.useFunc=I;var T;(function(S){S[S.Num=0]="Num",S[S.Str=1]="Str"})(T=e.Type||(e.Type={}));function F(S,N,V){if(S instanceof t.Name){const x=N===T.Num;return V?x?(0,t._)`"[" + ${S} + "]"`:(0,t._)`"['" + ${S} + "']"`:x?(0,t._)`"/" + ${S}`:(0,t._)`"/" + ${S}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return V?(0,t.getProperty)(S).toString():"/"+m(S)}e.getErrorPath=F;function z(S,N,V=S.opts.strictSchema){if(V){if(N=`strict mode: ${N}`,V===!0)throw new Error(N);S.self.logger.warn(N)}}e.checkStrictMode=z})(de);var dt={};Object.defineProperty(dt,"__esModule",{value:!0});const Fe=oe,Bs={data:new Fe.Name("data"),valCxt:new Fe.Name("valCxt"),instancePath:new Fe.Name("instancePath"),parentData:new Fe.Name("parentData"),parentDataProperty:new Fe.Name("parentDataProperty"),rootData:new Fe.Name("rootData"),dynamicAnchors:new Fe.Name("dynamicAnchors"),vErrors:new Fe.Name("vErrors"),errors:new Fe.Name("errors"),this:new Fe.Name("this"),self:new Fe.Name("self"),scope:new Fe.Name("scope"),json:new Fe.Name("json"),jsonPos:new Fe.Name("jsonPos"),jsonLen:new Fe.Name("jsonLen"),jsonPart:new Fe.Name("jsonPart")};dt.default=Bs;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=oe,r=de,n=dt;e.keywordError={message:({keyword:E})=>(0,t.str)`must pass "${E}" keyword validation`},e.keyword$DataError={message:({keyword:E,schemaType:$})=>$?(0,t.str)`"${E}" keyword must be ${$} ($data)`:(0,t.str)`"${E}" keyword is invalid ($data)`};function a(E,$=e.keywordError,I,T){const{it:F}=E,{gen:z,compositeRule:S,allErrors:N}=F,V=m(E,$,I);T??(S||N)?f(z,V):p(F,(0,t._)`[${V}]`)}e.reportError=a;function s(E,$=e.keywordError,I){const{it:T}=E,{gen:F,compositeRule:z,allErrors:S}=T,N=m(E,$,I);f(F,N),z||S||p(T,n.default.vErrors)}e.reportExtraError=s;function u(E,$){E.assign(n.default.errors,$),E.if((0,t._)`${n.default.vErrors} !== null`,()=>E.if($,()=>E.assign((0,t._)`${n.default.vErrors}.length`,$),()=>E.assign(n.default.vErrors,null)))}e.resetErrorsCount=u;function d({gen:E,keyword:$,schemaValue:I,data:T,errsCount:F,it:z}){if(F===void 0)throw new Error("ajv implementation error");const S=E.name("err");E.forRange("i",F,n.default.errors,N=>{E.const(S,(0,t._)`${n.default.vErrors}[${N}]`),E.if((0,t._)`${S}.instancePath === undefined`,()=>E.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(n.default.instancePath,z.errorPath))),E.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${z.errSchemaPath}/${$}`),z.opts.verbose&&(E.assign((0,t._)`${S}.schema`,I),E.assign((0,t._)`${S}.data`,T))})}e.extendErrors=d;function f(E,$){const I=E.const("err",$);E.if((0,t._)`${n.default.vErrors} === null`,()=>E.assign(n.default.vErrors,(0,t._)`[${I}]`),(0,t._)`${n.default.vErrors}.push(${I})`),E.code((0,t._)`${n.default.errors}++`)}function p(E,$){const{gen:I,validateName:T,schemaEnv:F}=E;F.$async?I.throw((0,t._)`new ${E.ValidationError}(${$})`):(I.assign((0,t._)`${T}.errors`,$),I.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function m(E,$,I){const{createErrors:T}=E.it;return T===!1?(0,t._)`{}`:j(E,$,I)}function j(E,$,I={}){const{gen:T,it:F}=E,z=[v(F,I),_(E,I)];return O(E,$,z),T.object(...z)}function v({errorPath:E},{instancePath:$}){const I=$?(0,t.str)`${E}${(0,r.getErrorPath)($,r.Type.Str)}`:E;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,I)]}function _({keyword:E,it:{errSchemaPath:$}},{schemaPath:I,parentSchema:T}){let F=T?$:(0,t.str)`${$}/${E}`;return I&&(F=(0,t.str)`${F}${(0,r.getErrorPath)(I,r.Type.Str)}`),[c.schemaPath,F]}function O(E,{params:$,message:I},T){const{keyword:F,data:z,schemaValue:S,it:N}=E,{opts:V,propertyName:x,topSchemaRef:L,schemaPath:J}=N;T.push([c.keyword,F],[c.params,typeof $=="function"?$(E):$||(0,t._)`{}`]),V.messages&&T.push([c.message,typeof I=="function"?I(E):I]),V.verbose&&T.push([c.schema,S],[c.parentSchema,(0,t._)`${L}${J}`],[n.default.data,z]),x&&T.push([c.propertyName,x])}})(Or);Object.defineProperty(tr,"__esModule",{value:!0});tr.boolOrEmptySchema=tr.topBoolOrEmptySchema=void 0;const Js=Or,Gs=oe,Ys=dt,xs={message:"boolean schema is false"};function Ws(e){const{gen:t,schema:r,validateName:n}=e;r===!1?za(e,!1):typeof r=="object"&&r.$async===!0?t.return(Ys.default.data):(t.assign((0,Gs._)`${n}.errors`,null),t.return(!0))}tr.topBoolOrEmptySchema=Ws;function Qs(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),za(e)):r.var(t,!0)}tr.boolOrEmptySchema=Qs;function za(e,t){const{gen:r,data:n}=e,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Js.reportError)(a,xs,void 0,t)}var kr={},Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.getRules=Lt.isJSONType=void 0;const Xs=["string","number","integer","boolean","null","object","array"],Zs=new Set(Xs);function ei(e){return typeof e=="string"&&Zs.has(e)}Lt.isJSONType=ei;function ti(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Lt.getRules=ti;var mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.shouldUseRule=mt.shouldUseGroup=mt.schemaHasRulesForType=void 0;function ri({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&La(e,n)}mt.schemaHasRulesForType=ri;function La(e,t){return t.rules.some(r=>Ka(e,r))}mt.shouldUseGroup=La;function Ka(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}mt.shouldUseRule=Ka;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=Lt,r=mt,n=Or,a=oe,s=de;var u;(function(T){T[T.Correct=0]="Correct",T[T.Wrong=1]="Wrong"})(u=e.DataType||(e.DataType={}));function d(T){const F=f(T.type);if(F.includes("null")){if(T.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!F.length&&T.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');T.nullable===!0&&F.push("null")}return F}e.getSchemaTypes=d;function f(T){const F=Array.isArray(T)?T:T?[T]:[];if(F.every(t.isJSONType))return F;throw new Error("type must be JSONType or JSONType[]: "+F.join(","))}e.getJSONTypes=f;function p(T,F){const{gen:z,data:S,opts:N}=T,V=m(F,N.coerceTypes),x=F.length>0&&!(V.length===0&&F.length===1&&(0,r.schemaHasRulesForType)(T,F[0]));if(x){const L=O(F,S,N.strictNumbers,u.Wrong);z.if(L,()=>{V.length?j(T,F,V):$(T)})}return x}e.coerceAndCheckDataType=p;const c=new Set(["string","number","integer","boolean","null"]);function m(T,F){return F?T.filter(z=>c.has(z)||F==="array"&&z==="array"):[]}function j(T,F,z){const{gen:S,data:N,opts:V}=T,x=S.let("dataType",(0,a._)`typeof ${N}`),L=S.let("coerced",(0,a._)`undefined`);V.coerceTypes==="array"&&S.if((0,a._)`${x} == 'object' && Array.isArray(${N}) && ${N}.length == 1`,()=>S.assign(N,(0,a._)`${N}[0]`).assign(x,(0,a._)`typeof ${N}`).if(O(F,N,V.strictNumbers),()=>S.assign(L,N))),S.if((0,a._)`${L} !== undefined`);for(const Z of z)(c.has(Z)||Z==="array"&&V.coerceTypes==="array")&&J(Z);S.else(),$(T),S.endIf(),S.if((0,a._)`${L} !== undefined`,()=>{S.assign(N,L),v(T,L)});function J(Z){switch(Z){case"string":S.elseIf((0,a._)`${x} == "number" || ${x} == "boolean"`).assign(L,(0,a._)`"" + ${N}`).elseIf((0,a._)`${N} === null`).assign(L,(0,a._)`""`);return;case"number":S.elseIf((0,a._)`${x} == "boolean" || ${N} === null
              || (${x} == "string" && ${N} && ${N} == +${N})`).assign(L,(0,a._)`+${N}`);return;case"integer":S.elseIf((0,a._)`${x} === "boolean" || ${N} === null
              || (${x} === "string" && ${N} && ${N} == +${N} && !(${N} % 1))`).assign(L,(0,a._)`+${N}`);return;case"boolean":S.elseIf((0,a._)`${N} === "false" || ${N} === 0 || ${N} === null`).assign(L,!1).elseIf((0,a._)`${N} === "true" || ${N} === 1`).assign(L,!0);return;case"null":S.elseIf((0,a._)`${N} === "" || ${N} === 0 || ${N} === false`),S.assign(L,null);return;case"array":S.elseIf((0,a._)`${x} === "string" || ${x} === "number"
              || ${x} === "boolean" || ${N} === null`).assign(L,(0,a._)`[${N}]`)}}}function v({gen:T,parentData:F,parentDataProperty:z},S){T.if((0,a._)`${F} !== undefined`,()=>T.assign((0,a._)`${F}[${z}]`,S))}function _(T,F,z,S=u.Correct){const N=S===u.Correct?a.operators.EQ:a.operators.NEQ;let V;switch(T){case"null":return(0,a._)`${F} ${N} null`;case"array":V=(0,a._)`Array.isArray(${F})`;break;case"object":V=(0,a._)`${F} && typeof ${F} == "object" && !Array.isArray(${F})`;break;case"integer":V=x((0,a._)`!(${F} % 1) && !isNaN(${F})`);break;case"number":V=x();break;default:return(0,a._)`typeof ${F} ${N} ${T}`}return S===u.Correct?V:(0,a.not)(V);function x(L=a.nil){return(0,a.and)((0,a._)`typeof ${F} == "number"`,L,z?(0,a._)`isFinite(${F})`:a.nil)}}e.checkDataType=_;function O(T,F,z,S){if(T.length===1)return _(T[0],F,z,S);let N;const V=(0,s.toHash)(T);if(V.array&&V.object){const x=(0,a._)`typeof ${F} != "object"`;N=V.null?x:(0,a._)`!${F} || ${x}`,delete V.null,delete V.array,delete V.object}else N=a.nil;V.number&&delete V.integer;for(const x in V)N=(0,a.and)(N,_(x,F,z,S));return N}e.checkDataTypes=O;const E={message:({schema:T})=>`must be ${T}`,params:({schema:T,schemaValue:F})=>typeof T=="string"?(0,a._)`{type: ${T}}`:(0,a._)`{type: ${F}}`};function $(T){const F=I(T);(0,n.reportError)(F,E)}e.reportTypeError=$;function I(T){const{gen:F,data:z,schema:S}=T,N=(0,s.schemaRefOrVal)(T,S,"type");return{gen:F,keyword:"type",data:z,schema:S.type,schemaCode:N,schemaValue:N,parentSchema:S,params:{},it:T}}})(kr);var un={};Object.defineProperty(un,"__esModule",{value:!0});un.assignDefaults=void 0;const Wt=oe,ni=de;function ai(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const a in r)_a(e,a,r[a].default);else t==="array"&&Array.isArray(n)&&n.forEach((a,s)=>_a(e,s,a.default))}un.assignDefaults=ai;function _a(e,t,r){const{gen:n,compositeRule:a,data:s,opts:u}=e;if(r===void 0)return;const d=(0,Wt._)`${s}${(0,Wt.getProperty)(t)}`;if(a){(0,ni.checkStrictMode)(e,`default is ignored for: ${d}`);return}let f=(0,Wt._)`${d} === undefined`;u.useDefaults==="empty"&&(f=(0,Wt._)`${f} || ${d} === null || ${d} === ""`),n.if(f,(0,Wt._)`${d} = ${(0,Wt.stringify)(r)}`)}var lt={},ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.validateUnion=ie.validateArray=ie.usePattern=ie.callValidateCode=ie.schemaProperties=ie.allSchemaProperties=ie.noPropertyInData=ie.propertyInData=ie.isOwnProperty=ie.hasPropFunc=ie.reportMissingProp=ie.checkMissingProp=ie.checkReportMissingProp=void 0;const ge=oe,Nn=de,wt=dt,si=de;function ii(e,t){const{gen:r,data:n,it:a}=e;r.if(Rn(r,n,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ge._)`${t}`},!0),e.error()})}ie.checkReportMissingProp=ii;function oi({gen:e,data:t,it:{opts:r}},n,a){return(0,ge.or)(...n.map(s=>(0,ge.and)(Rn(e,t,s,r.ownProperties),(0,ge._)`${a} = ${s}`)))}ie.checkMissingProp=oi;function ui(e,t){e.setParams({missingProperty:t},!0),e.error()}ie.reportMissingProp=ui;function qa(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ge._)`Object.prototype.hasOwnProperty`})}ie.hasPropFunc=qa;function jn(e,t,r){return(0,ge._)`${qa(e)}.call(${t}, ${r})`}ie.isOwnProperty=jn;function ci(e,t,r,n){const a=(0,ge._)`${t}${(0,ge.getProperty)(r)} !== undefined`;return n?(0,ge._)`${a} && ${jn(e,t,r)}`:a}ie.propertyInData=ci;function Rn(e,t,r,n){const a=(0,ge._)`${t}${(0,ge.getProperty)(r)} === undefined`;return n?(0,ge.or)(a,(0,ge.not)(jn(e,t,r))):a}ie.noPropertyInData=Rn;function Ha(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}ie.allSchemaProperties=Ha;function li(e,t){return Ha(t).filter(r=>!(0,Nn.alwaysValidSchema)(e,t[r]))}ie.schemaProperties=li;function fi({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:s},it:u},d,f,p){const c=p?(0,ge._)`${e}, ${t}, ${n}${a}`:t,m=[[wt.default.instancePath,(0,ge.strConcat)(wt.default.instancePath,s)],[wt.default.parentData,u.parentData],[wt.default.parentDataProperty,u.parentDataProperty],[wt.default.rootData,wt.default.rootData]];u.opts.dynamicRef&&m.push([wt.default.dynamicAnchors,wt.default.dynamicAnchors]);const j=(0,ge._)`${c}, ${r.object(...m)}`;return f!==ge.nil?(0,ge._)`${d}.call(${f}, ${j})`:(0,ge._)`${d}(${j})`}ie.callValidateCode=fi;const di=(0,ge._)`new RegExp`;function hi({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:a}=t.code,s=a(r,n);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ge._)`${a.code==="new RegExp"?di:(0,si.useFunc)(e,a)}(${r}, ${n})`})}ie.usePattern=hi;function pi(e){const{gen:t,data:r,keyword:n,it:a}=e,s=t.name("valid");if(a.allErrors){const d=t.let("valid",!0);return u(()=>t.assign(d,!1)),d}return t.var(s,!0),u(()=>t.break()),s;function u(d){const f=t.const("len",(0,ge._)`${r}.length`);t.forRange("i",0,f,p=>{e.subschema({keyword:n,dataProp:p,dataPropType:Nn.Type.Num},s),t.if((0,ge.not)(s),d)})}}ie.validateArray=pi;function mi(e){const{gen:t,schema:r,keyword:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(f=>(0,Nn.alwaysValidSchema)(a,f))&&!a.opts.unevaluated)return;const u=t.let("valid",!1),d=t.name("_valid");t.block(()=>r.forEach((f,p)=>{const c=e.subschema({keyword:n,schemaProp:p,compositeRule:!0},d);t.assign(u,(0,ge._)`${u} || ${d}`),e.mergeValidEvaluated(c,d)||t.if((0,ge.not)(u))})),e.result(u,()=>e.reset(),()=>e.error(!0))}ie.validateUnion=mi;Object.defineProperty(lt,"__esModule",{value:!0});lt.validateKeywordUsage=lt.validSchemaType=lt.funcKeywordCode=lt.macroKeywordCode=void 0;const Me=oe,Vt=dt,vi=ie,yi=Or;function _i(e,t){const{gen:r,keyword:n,schema:a,parentSchema:s,it:u}=e,d=t.macro.call(u.self,a,s,u),f=Ba(r,n,d);u.opts.validateSchema!==!1&&u.self.validateSchema(d,!0);const p=r.name("valid");e.subschema({schema:d,schemaPath:Me.nil,errSchemaPath:`${u.errSchemaPath}/${n}`,topSchemaRef:f,compositeRule:!0},p),e.pass(p,()=>e.error(!0))}lt.macroKeywordCode=_i;function gi(e,t){var r;const{gen:n,keyword:a,schema:s,parentSchema:u,$data:d,it:f}=e;bi(f,t);const p=!d&&t.compile?t.compile.call(f.self,s,u,f):t.validate,c=Ba(n,a,p),m=n.let("valid");e.block$data(m,j),e.ok((r=t.valid)!==null&&r!==void 0?r:m);function j(){if(t.errors===!1)O(),t.modifying&&ga(e),E(()=>e.error());else{const $=t.async?v():_();t.modifying&&ga(e),E(()=>$i(e,$))}}function v(){const $=n.let("ruleErrs",null);return n.try(()=>O((0,Me._)`await `),I=>n.assign(m,!1).if((0,Me._)`${I} instanceof ${f.ValidationError}`,()=>n.assign($,(0,Me._)`${I}.errors`),()=>n.throw(I))),$}function _(){const $=(0,Me._)`${c}.errors`;return n.assign($,null),O(Me.nil),$}function O($=t.async?(0,Me._)`await `:Me.nil){const I=f.opts.passContext?Vt.default.this:Vt.default.self,T=!("compile"in t&&!d||t.schema===!1);n.assign(m,(0,Me._)`${$}${(0,vi.callValidateCode)(e,c,I,T)}`,t.modifying)}function E($){var I;n.if((0,Me.not)((I=t.valid)!==null&&I!==void 0?I:m),$)}}lt.funcKeywordCode=gi;function ga(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Me._)`${n.parentData}[${n.parentDataProperty}]`))}function $i(e,t){const{gen:r}=e;r.if((0,Me._)`Array.isArray(${t})`,()=>{r.assign(Vt.default.vErrors,(0,Me._)`${Vt.default.vErrors} === null ? ${t} : ${Vt.default.vErrors}.concat(${t})`).assign(Vt.default.errors,(0,Me._)`${Vt.default.vErrors}.length`),(0,yi.extendErrors)(e)},()=>e.error())}function bi({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Ba(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Me.stringify)(r)})}function wi(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}lt.validSchemaType=wi;function Ei({schema:e,opts:t,self:r,errSchemaPath:n},a,s){if(Array.isArray(a.keyword)?!a.keyword.includes(s):a.keyword!==s)throw new Error("ajv implementation error");const u=a.dependencies;if(u!=null&&u.some(d=>!Object.prototype.hasOwnProperty.call(e,d)))throw new Error(`parent schema must have dependencies of ${s}: ${u.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[s])){const f=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(f);else throw new Error(f)}}lt.validateKeywordUsage=Ei;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.extendSubschemaMode=Tt.extendSubschemaData=Tt.getSubschema=void 0;const ct=oe,Ja=de;function Si(e,{keyword:t,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:s,topSchemaRef:u}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const d=e.schema[t];return r===void 0?{schema:d,schemaPath:(0,ct._)`${e.schemaPath}${(0,ct.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:d[r],schemaPath:(0,ct._)`${e.schemaPath}${(0,ct.getProperty)(t)}${(0,ct.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Ja.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||s===void 0||u===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:u,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Tt.getSubschema=Si;function Pi(e,t,{dataProp:r,dataPropType:n,data:a,dataTypes:s,propertyName:u}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=t;if(r!==void 0){const{errorPath:p,dataPathArr:c,opts:m}=t,j=d.let("data",(0,ct._)`${t.data}${(0,ct.getProperty)(r)}`,!0);f(j),e.errorPath=(0,ct.str)`${p}${(0,Ja.getErrorPath)(r,n,m.jsPropertySyntax)}`,e.parentDataProperty=(0,ct._)`${r}`,e.dataPathArr=[...c,e.parentDataProperty]}if(a!==void 0){const p=a instanceof ct.Name?a:d.let("data",a,!0);f(p),u!==void 0&&(e.propertyName=u)}s&&(e.dataTypes=s);function f(p){e.data=p,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,p]}}Tt.extendSubschemaData=Pi;function Oi(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:s}){n!==void 0&&(e.compositeRule=n),a!==void 0&&(e.createErrors=a),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=r}Tt.extendSubschemaMode=Oi;var Ie={},Ga=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!==0;){var u=s[a];if(!e(t[u],r[u]))return!1}return!0}return t!==t&&r!==r},$n={},ki={get exports(){return $n},set exports(e){$n=e}},kt=ki.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};Br(t,n,a,e,"",e)};kt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};kt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};kt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};kt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Br(e,t,r,n,a,s,u,d,f,p){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,a,s,u,d,f,p);for(var c in n){var m=n[c];if(Array.isArray(m)){if(c in kt.arrayKeywords)for(var j=0;j<m.length;j++)Br(e,t,r,m[j],a+"/"+c+"/"+j,s,a,c,n,j)}else if(c in kt.propsKeywords){if(m&&typeof m=="object")for(var v in m)Br(e,t,r,m[v],a+"/"+c+"/"+Ti(v),s,a,c,n,v)}else(c in kt.keywords||e.allKeys&&!(c in kt.skipKeywords))&&Br(e,t,r,m,a+"/"+c,s,a,c,n)}r(n,a,s,u,d,f,p)}}function Ti(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(Ie,"__esModule",{value:!0});Ie.getSchemaRefs=Ie.resolveUrl=Ie.normalizeId=Ie._getFullPath=Ie.getFullPath=Ie.inlineRef=void 0;const Ni=de,ji=Ga,Ri=$n,Ci=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Ii(e,t=!0){return typeof e=="boolean"?!0:t===!0?!bn(e):t?Ya(e)<=t:!1}Ie.inlineRef=Ii;const Di=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function bn(e){for(const t in e){if(Di.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(bn)||typeof r=="object"&&bn(r))return!0}return!1}function Ya(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Ci.has(r)&&(typeof e[r]=="object"&&(0,Ni.eachItem)(e[r],n=>t+=Ya(n)),t===1/0))return 1/0}return t}function xa(e,t="",r){r!==!1&&(t=er(t));const n=e.parse(t);return Wa(e,n)}Ie.getFullPath=xa;function Wa(e,t){return e.serialize(t).split("#")[0]+"#"}Ie._getFullPath=Wa;const Ai=/#\/?$/;function er(e){return e?e.replace(Ai,""):""}Ie.normalizeId=er;function Fi(e,t,r){return r=er(r),e.resolve(t,r)}Ie.resolveUrl=Fi;const Mi=/^[a-z_][-a-z0-9._]*$/i;function Vi(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,a=er(e[r]||t),s={"":a},u=xa(n,a,!1),d={},f=new Set;return Ri(e,{allKeys:!0},(m,j,v,_)=>{if(_===void 0)return;const O=u+j;let E=s[_];typeof m[r]=="string"&&(E=$.call(this,m[r])),I.call(this,m.$anchor),I.call(this,m.$dynamicAnchor),s[j]=E;function $(T){const F=this.opts.uriResolver.resolve;if(T=er(E?F(E,T):T),f.has(T))throw c(T);f.add(T);let z=this.refs[T];return typeof z=="string"&&(z=this.refs[z]),typeof z=="object"?p(m,z.schema,T):T!==er(O)&&(T[0]==="#"?(p(m,d[T],T),d[T]=m):this.refs[T]=O),T}function I(T){if(typeof T=="string"){if(!Mi.test(T))throw new Error(`invalid anchor "${T}"`);$.call(this,`#${T}`)}}}),d;function p(m,j,v){if(j!==void 0&&!ji(m,j))throw c(v)}function c(m){return new Error(`reference "${m}" resolves to more than one schema`)}}Ie.getSchemaRefs=Vi;Object.defineProperty(rt,"__esModule",{value:!0});rt.getData=rt.KeywordCxt=rt.validateFunctionCode=void 0;const Qa=tr,$a=kr,Cn=mt,Xr=kr,Ui=un,mr=lt,pn=Tt,Y=oe,ee=dt,zi=Ie,vt=de,lr=Or;function Li(e){if(es(e)&&(ts(e),Za(e))){Hi(e);return}Xa(e,()=>(0,Qa.topBoolOrEmptySchema)(e))}rt.validateFunctionCode=Li;function Xa({gen:e,validateName:t,schema:r,schemaEnv:n,opts:a},s){a.code.es5?e.func(t,(0,Y._)`${ee.default.data}, ${ee.default.valCxt}`,n.$async,()=>{e.code((0,Y._)`"use strict"; ${ba(r,a)}`),qi(e,a),e.code(s)}):e.func(t,(0,Y._)`${ee.default.data}, ${Ki(a)}`,n.$async,()=>e.code(ba(r,a)).code(s))}function Ki(e){return(0,Y._)`{${ee.default.instancePath}="", ${ee.default.parentData}, ${ee.default.parentDataProperty}, ${ee.default.rootData}=${ee.default.data}${e.dynamicRef?(0,Y._)`, ${ee.default.dynamicAnchors}={}`:Y.nil}}={}`}function qi(e,t){e.if(ee.default.valCxt,()=>{e.var(ee.default.instancePath,(0,Y._)`${ee.default.valCxt}.${ee.default.instancePath}`),e.var(ee.default.parentData,(0,Y._)`${ee.default.valCxt}.${ee.default.parentData}`),e.var(ee.default.parentDataProperty,(0,Y._)`${ee.default.valCxt}.${ee.default.parentDataProperty}`),e.var(ee.default.rootData,(0,Y._)`${ee.default.valCxt}.${ee.default.rootData}`),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,Y._)`${ee.default.valCxt}.${ee.default.dynamicAnchors}`)},()=>{e.var(ee.default.instancePath,(0,Y._)`""`),e.var(ee.default.parentData,(0,Y._)`undefined`),e.var(ee.default.parentDataProperty,(0,Y._)`undefined`),e.var(ee.default.rootData,ee.default.data),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,Y._)`{}`)})}function Hi(e){const{schema:t,opts:r,gen:n}=e;Xa(e,()=>{r.$comment&&t.$comment&&ns(e),xi(e),n.let(ee.default.vErrors,null),n.let(ee.default.errors,0),r.unevaluated&&Bi(e),rs(e),Xi(e)})}function Bi(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,Y._)`${r}.evaluated`),t.if((0,Y._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Y._)`${e.evaluated}.props`,(0,Y._)`undefined`)),t.if((0,Y._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Y._)`${e.evaluated}.items`,(0,Y._)`undefined`))}function ba(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,Y._)`/*# sourceURL=${r} */`:Y.nil}function Ji(e,t){if(es(e)&&(ts(e),Za(e))){Gi(e,t);return}(0,Qa.boolOrEmptySchema)(e,t)}function Za({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function es(e){return typeof e.schema!="boolean"}function Gi(e,t){const{schema:r,gen:n,opts:a}=e;a.$comment&&r.$comment&&ns(e),Wi(e),Qi(e);const s=n.const("_errs",ee.default.errors);rs(e,s),n.var(t,(0,Y._)`${s} === ${ee.default.errors}`)}function ts(e){(0,vt.checkUnknownRules)(e),Yi(e)}function rs(e,t){if(e.opts.jtd)return wa(e,[],!1,t);const r=(0,$a.getSchemaTypes)(e.schema),n=(0,$a.coerceAndCheckDataType)(e,r);wa(e,r,!n,t)}function Yi(e){const{schema:t,errSchemaPath:r,opts:n,self:a}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,vt.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function xi(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,vt.checkStrictMode)(e,"default is ignored in the schema root")}function Wi(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,zi.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Qi(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function ns({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:a}){const s=r.$comment;if(a.$comment===!0)e.code((0,Y._)`${ee.default.self}.logger.log(${s})`);else if(typeof a.$comment=="function"){const u=(0,Y.str)`${n}/$comment`,d=e.scopeValue("root",{ref:t.root});e.code((0,Y._)`${ee.default.self}.opts.$comment(${s}, ${u}, ${d}.schema)`)}}function Xi(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:a,opts:s}=e;r.$async?t.if((0,Y._)`${ee.default.errors} === 0`,()=>t.return(ee.default.data),()=>t.throw((0,Y._)`new ${a}(${ee.default.vErrors})`)):(t.assign((0,Y._)`${n}.errors`,ee.default.vErrors),s.unevaluated&&Zi(e),t.return((0,Y._)`${ee.default.errors} === 0`))}function Zi({gen:e,evaluated:t,props:r,items:n}){r instanceof Y.Name&&e.assign((0,Y._)`${t}.props`,r),n instanceof Y.Name&&e.assign((0,Y._)`${t}.items`,n)}function wa(e,t,r,n){const{gen:a,schema:s,data:u,allErrors:d,opts:f,self:p}=e,{RULES:c}=p;if(s.$ref&&(f.ignoreKeywordsWithRef||!(0,vt.schemaHasRulesButRef)(s,c))){a.block(()=>ss(e,"$ref",c.all.$ref.definition));return}f.jtd||eo(e,t),a.block(()=>{for(const j of c.rules)m(j);m(c.post)});function m(j){(0,Cn.shouldUseGroup)(s,j)&&(j.type?(a.if((0,Xr.checkDataType)(j.type,u,f.strictNumbers)),Ea(e,j),t.length===1&&t[0]===j.type&&r&&(a.else(),(0,Xr.reportTypeError)(e)),a.endIf()):Ea(e,j),d||a.if((0,Y._)`${ee.default.errors} === ${n||0}`))}}function Ea(e,t){const{gen:r,schema:n,opts:{useDefaults:a}}=e;a&&(0,Ui.assignDefaults)(e,t.type),r.block(()=>{for(const s of t.rules)(0,Cn.shouldUseRule)(n,s)&&ss(e,s.keyword,s.definition,t.type)})}function eo(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(to(e,t),e.opts.allowUnionTypes||ro(e,t),no(e,e.dataTypes))}function to(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Sa(e.dataTypes,r)||In(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),e.dataTypes=e.dataTypes.filter(r=>Sa(t,r))}}function ro(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&In(e,"use allowUnionTypes to allow union type keyword")}function no(e,t){const r=e.self.RULES.all;for(const n in r){const a=r[n];if(typeof a=="object"&&(0,Cn.shouldUseRule)(e.schema,a)){const{type:s}=a.definition;s.length&&!s.some(u=>ao(t,u))&&In(e,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function ao(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Sa(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function In(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,vt.checkStrictMode)(e,t,e.opts.strictTypes)}class as{constructor(t,r,n){if((0,mr.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,vt.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",is(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,mr.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",ee.default.errors))}result(t,r,n){this.failResult((0,Y.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,Y.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,Y._)`${r} !== undefined && (${(0,Y.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?lr.reportExtraError:lr.reportError)(this,this.def.error,r)}$dataError(){(0,lr.reportError)(this,this.def.$dataError||lr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,lr.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=Y.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=Y.nil,r=Y.nil){if(!this.$data)return;const{gen:n,schemaCode:a,schemaType:s,def:u}=this;n.if((0,Y.or)((0,Y._)`${a} === undefined`,r)),t!==Y.nil&&n.assign(t,!0),(s.length||u.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==Y.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:a,it:s}=this;return(0,Y.or)(u(),d());function u(){if(n.length){if(!(r instanceof Y.Name))throw new Error("ajv implementation error");const f=Array.isArray(n)?n:[n];return(0,Y._)`${(0,Xr.checkDataTypes)(f,r,s.opts.strictNumbers,Xr.DataType.Wrong)}`}return Y.nil}function d(){if(a.validateSchema){const f=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,Y._)`!${f}(${r})`}return Y.nil}}subschema(t,r){const n=(0,pn.getSubschema)(this.it,t);(0,pn.extendSubschemaData)(n,this.it,t),(0,pn.extendSubschemaMode)(n,t);const a={...this.it,...n,items:void 0,props:void 0};return Ji(a,r),a}mergeEvaluated(t,r){const{it:n,gen:a}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=vt.mergeEvaluated.props(a,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=vt.mergeEvaluated.items(a,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(t,Y.Name)),!0}}rt.KeywordCxt=as;function ss(e,t,r,n){const a=new as(e,r,t);"code"in r?r.code(a,n):a.$data&&r.validate?(0,mr.funcKeywordCode)(a,r):"macro"in r?(0,mr.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,mr.funcKeywordCode)(a,r)}const so=/^\/(?:[^~]|~0|~1)*$/,io=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function is(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let a,s;if(e==="")return ee.default.rootData;if(e[0]==="/"){if(!so.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,s=ee.default.rootData}else{const p=io.exec(e);if(!p)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+p[1];if(a=p[2],a==="#"){if(c>=t)throw new Error(f("property/index",c));return n[t-c]}if(c>t)throw new Error(f("data",c));if(s=r[t-c],!a)return s}let u=s;const d=a.split("/");for(const p of d)p&&(s=(0,Y._)`${s}${(0,Y.getProperty)((0,vt.unescapeJsonPointer)(p))}`,u=(0,Y._)`${u} && ${s}`);return u;function f(p,c){return`Cannot access ${p} ${c} levels up, current level is ${t}`}}rt.getData=is;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});class oo extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Tr.default=oo;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});const mn=Ie;class uo extends Error{constructor(t,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,mn.resolveUrl)(t,r,n),this.missingSchema=(0,mn.normalizeId)((0,mn.getFullPath)(t,this.missingRef))}}Nr.default=uo;var Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.resolveSchema=Le.getCompilingSchema=Le.resolveRef=Le.compileSchema=Le.SchemaEnv=void 0;const Xe=oe,co=Tr,Ft=dt,tt=Ie,Pa=de,lo=rt;class cn{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,tt.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}Le.SchemaEnv=cn;function Dn(e){const t=os.call(this,e);if(t)return t;const r=(0,tt.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:s}=this.opts,u=new Xe.CodeGen(this.scope,{es5:n,lines:a,ownProperties:s});let d;e.$async&&(d=u.scopeValue("Error",{ref:co.default,code:(0,Xe._)`require("ajv/dist/runtime/validation_error").default`}));const f=u.scopeName("validate");e.validateName=f;const p={gen:u,allErrors:this.opts.allErrors,data:Ft.default.data,parentData:Ft.default.parentData,parentDataProperty:Ft.default.parentDataProperty,dataNames:[Ft.default.data],dataPathArr:[Xe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Xe.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:d,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Xe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Xe._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,lo.validateFunctionCode)(p),u.optimize(this.opts.code.optimize);const m=u.toString();c=`${u.scopeRefs(Ft.default.scope)}return ${m}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const v=new Function(`${Ft.default.self}`,`${Ft.default.scope}`,c)(this,this.scope.get());if(this.scope.value(f,{ref:v}),v.errors=null,v.schema=e.schema,v.schemaEnv=e,e.$async&&(v.$async=!0),this.opts.code.source===!0&&(v.source={validateName:f,validateCode:m,scopeValues:u._values}),this.opts.unevaluated){const{props:_,items:O}=p;v.evaluated={props:_ instanceof Xe.Name?void 0:_,items:O instanceof Xe.Name?void 0:O,dynamicProps:_ instanceof Xe.Name,dynamicItems:O instanceof Xe.Name},v.source&&(v.source.evaluated=(0,Xe.stringify)(v.evaluated))}return e.validate=v,e}catch(m){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),m}finally{this._compilations.delete(e)}}Le.compileSchema=Dn;function fo(e,t,r){var n;r=(0,tt.resolveUrl)(this.opts.uriResolver,t,r);const a=e.refs[r];if(a)return a;let s=mo.call(this,e,r);if(s===void 0){const u=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:d}=this.opts;u&&(s=new cn({schema:u,schemaId:d,root:e,baseId:t}))}if(s!==void 0)return e.refs[r]=ho.call(this,s)}Le.resolveRef=fo;function ho(e){return(0,tt.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Dn.call(this,e)}function os(e){for(const t of this._compilations)if(po(t,e))return t}Le.getCompilingSchema=os;function po(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function mo(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||ln.call(this,e,t)}function ln(e,t){const r=this.opts.uriResolver.parse(t),n=(0,tt._getFullPath)(this.opts.uriResolver,r);let a=(0,tt.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===a)return vn.call(this,r,e);const s=(0,tt.normalizeId)(n),u=this.refs[s]||this.schemas[s];if(typeof u=="string"){const d=ln.call(this,e,u);return typeof(d==null?void 0:d.schema)!="object"?void 0:vn.call(this,r,d)}if(typeof(u==null?void 0:u.schema)=="object"){if(u.validate||Dn.call(this,u),s===(0,tt.normalizeId)(t)){const{schema:d}=u,{schemaId:f}=this.opts,p=d[f];return p&&(a=(0,tt.resolveUrl)(this.opts.uriResolver,a,p)),new cn({schema:d,schemaId:f,root:e,baseId:a})}return vn.call(this,r,u)}}Le.resolveSchema=ln;const vo=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function vn(e,{baseId:t,schema:r,root:n}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const d of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const f=r[(0,Pa.unescapeFragment)(d)];if(f===void 0)return;r=f;const p=typeof r=="object"&&r[this.opts.schemaId];!vo.has(d)&&p&&(t=(0,tt.resolveUrl)(this.opts.uriResolver,t,p))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Pa.schemaHasRulesButRef)(r,this.RULES)){const d=(0,tt.resolveUrl)(this.opts.uriResolver,t,r.$ref);s=ln.call(this,n,d)}const{schemaId:u}=this.opts;if(s=s||new cn({schema:r,schemaId:u,root:n,baseId:t}),s.schema!==s.root.schema)return s}const yo="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",_o="Meta-schema for $data reference (JSON AnySchema extension proposal)",go="object",$o=["$data"],bo={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},wo=!1,Eo={$id:yo,description:_o,type:go,required:$o,properties:bo,additionalProperties:wo};var An={},Zr={},So={get exports(){return Zr},set exports(e){Zr=e}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,n){n(t)})(js,function(r){function n(){for(var y=arguments.length,l=Array(y),b=0;b<y;b++)l[b]=arguments[b];if(l.length>1){l[0]=l[0].slice(0,-1);for(var D=l.length-1,C=1;C<D;++C)l[C]=l[C].slice(1,-1);return l[D]=l[D].slice(1),l.join("")}else return l[0]}function a(y){return"(?:"+y+")"}function s(y){return y===void 0?"undefined":y===null?"null":Object.prototype.toString.call(y).split(" ").pop().split("]").shift().toLowerCase()}function u(y){return y.toUpperCase()}function d(y){return y!=null?y instanceof Array?y:typeof y.length!="number"||y.split||y.setInterval||y.call?[y]:Array.prototype.slice.call(y):[]}function f(y,l){var b=y;if(l)for(var D in l)b[D]=l[D];return b}function p(y){var l="[A-Za-z]",b="[0-9]",D=n(b,"[A-Fa-f]"),C=a(a("%[EFef]"+D+"%"+D+D+"%"+D+D)+"|"+a("%[89A-Fa-f]"+D+"%"+D+D)+"|"+a("%"+D+D)),W="[\\:\\/\\?\\#\\[\\]\\@]",Q="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",le=n(W,Q),ye=y?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Pe=y?"[\\uE000-\\uF8FF]":"[]",ue=n(l,b,"[\\-\\.\\_\\~]",ye);a(l+n(l,b,"[\\+\\-\\.]")+"*"),a(a(C+"|"+n(ue,Q,"[\\:]"))+"*");var ve=a(a("25[0-5]")+"|"+a("2[0-4]"+b)+"|"+a("1"+b+b)+"|"+a("0?[1-9]"+b)+"|0?0?"+b),Oe=a(ve+"\\."+ve+"\\."+ve+"\\."+ve),ne=a(D+"{1,4}"),$e=a(a(ne+"\\:"+ne)+"|"+Oe),Te=a(a(ne+"\\:")+"{6}"+$e),be=a("\\:\\:"+a(ne+"\\:")+"{5}"+$e),bt=a(a(ne)+"?\\:\\:"+a(ne+"\\:")+"{4}"+$e),it=a(a(a(ne+"\\:")+"{0,1}"+ne)+"?\\:\\:"+a(ne+"\\:")+"{3}"+$e),ot=a(a(a(ne+"\\:")+"{0,2}"+ne)+"?\\:\\:"+a(ne+"\\:")+"{2}"+$e),Gt=a(a(a(ne+"\\:")+"{0,3}"+ne)+"?\\:\\:"+ne+"\\:"+$e),Dt=a(a(a(ne+"\\:")+"{0,4}"+ne)+"?\\:\\:"+$e),He=a(a(a(ne+"\\:")+"{0,5}"+ne)+"?\\:\\:"+ne),ut=a(a(a(ne+"\\:")+"{0,6}"+ne)+"?\\:\\:"),At=a([Te,be,bt,it,ot,Gt,Dt,He,ut].join("|")),ht=a(a(ue+"|"+C)+"+");a("[vV]"+D+"+\\."+n(ue,Q,"[\\:]")+"+"),a(a(C+"|"+n(ue,Q))+"*");var ur=a(C+"|"+n(ue,Q,"[\\:\\@]"));return a(a(C+"|"+n(ue,Q,"[\\@]"))+"+"),a(a(ur+"|"+n("[\\/\\?]",Pe))+"*"),{NOT_SCHEME:new RegExp(n("[^]",l,b,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",ue,Q),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",ue,Q),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",ue,Q),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",ue,Q),"g"),NOT_QUERY:new RegExp(n("[^\\%]",ue,Q,"[\\:\\@\\/\\?]",Pe),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",ue,Q,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",ue,Q),"g"),UNRESERVED:new RegExp(ue,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",ue,le),"g"),PCT_ENCODED:new RegExp(C,"g"),IPV4ADDRESS:new RegExp("^("+Oe+")$"),IPV6ADDRESS:new RegExp("^\\[?("+At+")"+a(a("\\%25|\\%(?!"+D+"{2})")+"("+ht+")")+"?\\]?$")}}var c=p(!1),m=p(!0),j=function(){function y(l,b){var D=[],C=!0,W=!1,Q=void 0;try{for(var le=l[Symbol.iterator](),ye;!(C=(ye=le.next()).done)&&(D.push(ye.value),!(b&&D.length===b));C=!0);}catch(Pe){W=!0,Q=Pe}finally{try{!C&&le.return&&le.return()}finally{if(W)throw Q}}return D}return function(l,b){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return y(l,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(y){if(Array.isArray(y)){for(var l=0,b=Array(y.length);l<y.length;l++)b[l]=y[l];return b}else return Array.from(y)},_=2147483647,O=36,E=1,$=26,I=38,T=700,F=72,z=128,S="-",N=/^xn--/,V=/[^\0-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=O-E,Z=Math.floor,Ne=String.fromCharCode;function pe(y){throw new RangeError(L[y])}function Je(y,l){for(var b=[],D=y.length;D--;)b[D]=l(y[D]);return b}function Ge(y,l){var b=y.split("@"),D="";b.length>1&&(D=b[0]+"@",y=b[1]),y=y.replace(x,".");var C=y.split("."),W=Je(C,l).join(".");return D+W}function Ye(y){for(var l=[],b=0,D=y.length;b<D;){var C=y.charCodeAt(b++);if(C>=55296&&C<=56319&&b<D){var W=y.charCodeAt(b++);(W&64512)==56320?l.push(((C&1023)<<10)+(W&1023)+65536):(l.push(C),b--)}else l.push(C)}return l}var nt=function(l){return String.fromCodePoint.apply(String,v(l))},xe=function(l){return l-48<10?l-22:l-65<26?l-65:l-97<26?l-97:O},K=function(l,b){return l+22+75*(l<26)-((b!=0)<<5)},P=function(l,b,D){var C=0;for(l=D?Z(l/T):l>>1,l+=Z(l/b);l>J*$>>1;C+=O)l=Z(l/J);return Z(C+(J+1)*l/(l+I))},U=function(l){var b=[],D=l.length,C=0,W=z,Q=F,le=l.lastIndexOf(S);le<0&&(le=0);for(var ye=0;ye<le;++ye)l.charCodeAt(ye)>=128&&pe("not-basic"),b.push(l.charCodeAt(ye));for(var Pe=le>0?le+1:0;Pe<D;){for(var ue=C,ve=1,Oe=O;;Oe+=O){Pe>=D&&pe("invalid-input");var ne=xe(l.charCodeAt(Pe++));(ne>=O||ne>Z((_-C)/ve))&&pe("overflow"),C+=ne*ve;var $e=Oe<=Q?E:Oe>=Q+$?$:Oe-Q;if(ne<$e)break;var Te=O-$e;ve>Z(_/Te)&&pe("overflow"),ve*=Te}var be=b.length+1;Q=P(C-ue,be,ue==0),Z(C/be)>_-W&&pe("overflow"),W+=Z(C/be),C%=be,b.splice(C++,0,W)}return String.fromCodePoint.apply(String,b)},k=function(l){var b=[];l=Ye(l);var D=l.length,C=z,W=0,Q=F,le=!0,ye=!1,Pe=void 0;try{for(var ue=l[Symbol.iterator](),ve;!(le=(ve=ue.next()).done);le=!0){var Oe=ve.value;Oe<128&&b.push(Ne(Oe))}}catch(cr){ye=!0,Pe=cr}finally{try{!le&&ue.return&&ue.return()}finally{if(ye)throw Pe}}var ne=b.length,$e=ne;for(ne&&b.push(S);$e<D;){var Te=_,be=!0,bt=!1,it=void 0;try{for(var ot=l[Symbol.iterator](),Gt;!(be=(Gt=ot.next()).done);be=!0){var Dt=Gt.value;Dt>=C&&Dt<Te&&(Te=Dt)}}catch(cr){bt=!0,it=cr}finally{try{!be&&ot.return&&ot.return()}finally{if(bt)throw it}}var He=$e+1;Te-C>Z((_-W)/He)&&pe("overflow"),W+=(Te-C)*He,C=Te;var ut=!0,At=!1,ht=void 0;try{for(var ur=l[Symbol.iterator](),ha;!(ut=(ha=ur.next()).done);ut=!0){var pa=ha.value;if(pa<C&&++W>_&&pe("overflow"),pa==C){for(var Fr=W,Mr=O;;Mr+=O){var Vr=Mr<=Q?E:Mr>=Q+$?$:Mr-Q;if(Fr<Vr)break;var ma=Fr-Vr,va=O-Vr;b.push(Ne(K(Vr+ma%va,0))),Fr=Z(ma/va)}b.push(Ne(K(Fr,0))),Q=P(W,He,$e==ne),W=0,++$e}}}catch(cr){At=!0,ht=cr}finally{try{!ut&&ur.return&&ur.return()}finally{if(At)throw ht}}++W,++C}return b.join("")},o=function(l){return Ge(l,function(b){return N.test(b)?U(b.slice(4).toLowerCase()):b})},g=function(l){return Ge(l,function(b){return V.test(b)?"xn--"+k(b):b})},A={version:"2.1.0",ucs2:{decode:Ye,encode:nt},decode:U,encode:k,toASCII:g,toUnicode:o},q={};function H(y){var l=y.charCodeAt(0),b=void 0;return l<16?b="%0"+l.toString(16).toUpperCase():l<128?b="%"+l.toString(16).toUpperCase():l<2048?b="%"+(l>>6|192).toString(16).toUpperCase()+"%"+(l&63|128).toString(16).toUpperCase():b="%"+(l>>12|224).toString(16).toUpperCase()+"%"+(l>>6&63|128).toString(16).toUpperCase()+"%"+(l&63|128).toString(16).toUpperCase(),b}function te(y){for(var l="",b=0,D=y.length;b<D;){var C=parseInt(y.substr(b+1,2),16);if(C<128)l+=String.fromCharCode(C),b+=3;else if(C>=194&&C<224){if(D-b>=6){var W=parseInt(y.substr(b+4,2),16);l+=String.fromCharCode((C&31)<<6|W&63)}else l+=y.substr(b,6);b+=6}else if(C>=224){if(D-b>=9){var Q=parseInt(y.substr(b+4,2),16),le=parseInt(y.substr(b+7,2),16);l+=String.fromCharCode((C&15)<<12|(Q&63)<<6|le&63)}else l+=y.substr(b,9);b+=9}else l+=y.substr(b,3),b+=3}return l}function ae(y,l){function b(D){var C=te(D);return C.match(l.UNRESERVED)?C:D}return y.scheme&&(y.scheme=String(y.scheme).replace(l.PCT_ENCODED,b).toLowerCase().replace(l.NOT_SCHEME,"")),y.userinfo!==void 0&&(y.userinfo=String(y.userinfo).replace(l.PCT_ENCODED,b).replace(l.NOT_USERINFO,H).replace(l.PCT_ENCODED,u)),y.host!==void 0&&(y.host=String(y.host).replace(l.PCT_ENCODED,b).toLowerCase().replace(l.NOT_HOST,H).replace(l.PCT_ENCODED,u)),y.path!==void 0&&(y.path=String(y.path).replace(l.PCT_ENCODED,b).replace(y.scheme?l.NOT_PATH:l.NOT_PATH_NOSCHEME,H).replace(l.PCT_ENCODED,u)),y.query!==void 0&&(y.query=String(y.query).replace(l.PCT_ENCODED,b).replace(l.NOT_QUERY,H).replace(l.PCT_ENCODED,u)),y.fragment!==void 0&&(y.fragment=String(y.fragment).replace(l.PCT_ENCODED,b).replace(l.NOT_FRAGMENT,H).replace(l.PCT_ENCODED,u)),y}function me(y){return y.replace(/^0*(.*)/,"$1")||"0"}function Ke(y,l){var b=y.match(l.IPV4ADDRESS)||[],D=j(b,2),C=D[1];return C?C.split(".").map(me).join("."):y}function yt(y,l){var b=y.match(l.IPV6ADDRESS)||[],D=j(b,3),C=D[1],W=D[2];if(C){for(var Q=C.toLowerCase().split("::").reverse(),le=j(Q,2),ye=le[0],Pe=le[1],ue=Pe?Pe.split(":").map(me):[],ve=ye.split(":").map(me),Oe=l.IPV4ADDRESS.test(ve[ve.length-1]),ne=Oe?7:8,$e=ve.length-ne,Te=Array(ne),be=0;be<ne;++be)Te[be]=ue[be]||ve[$e+be]||"";Oe&&(Te[ne-1]=Ke(Te[ne-1],l));var bt=Te.reduce(function(He,ut,At){if(!ut||ut==="0"){var ht=He[He.length-1];ht&&ht.index+ht.length===At?ht.length++:He.push({index:At,length:1})}return He},[]),it=bt.sort(function(He,ut){return ut.length-He.length})[0],ot=void 0;if(it&&it.length>1){var Gt=Te.slice(0,it.index),Dt=Te.slice(it.index+it.length);ot=Gt.join(":")+"::"+Dt.join(":")}else ot=Te.join(":");return W&&(ot+="%"+W),ot}else return y}var Nt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,jt="".match(/(){0}/)[1]===void 0;function De(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b={},D=l.iri!==!1?m:c;l.reference==="suffix"&&(y=(l.scheme?l.scheme+":":"")+"//"+y);var C=y.match(Nt);if(C){jt?(b.scheme=C[1],b.userinfo=C[3],b.host=C[4],b.port=parseInt(C[5],10),b.path=C[6]||"",b.query=C[7],b.fragment=C[8],isNaN(b.port)&&(b.port=C[5])):(b.scheme=C[1]||void 0,b.userinfo=y.indexOf("@")!==-1?C[3]:void 0,b.host=y.indexOf("//")!==-1?C[4]:void 0,b.port=parseInt(C[5],10),b.path=C[6]||"",b.query=y.indexOf("?")!==-1?C[7]:void 0,b.fragment=y.indexOf("#")!==-1?C[8]:void 0,isNaN(b.port)&&(b.port=y.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?C[4]:void 0)),b.host&&(b.host=yt(Ke(b.host,D),D)),b.scheme===void 0&&b.userinfo===void 0&&b.host===void 0&&b.port===void 0&&!b.path&&b.query===void 0?b.reference="same-document":b.scheme===void 0?b.reference="relative":b.fragment===void 0?b.reference="absolute":b.reference="uri",l.reference&&l.reference!=="suffix"&&l.reference!==b.reference&&(b.error=b.error||"URI is not a "+l.reference+" reference.");var W=q[(l.scheme||b.scheme||"").toLowerCase()];if(!l.unicodeSupport&&(!W||!W.unicodeSupport)){if(b.host&&(l.domainHost||W&&W.domainHost))try{b.host=A.toASCII(b.host.replace(D.PCT_ENCODED,te).toLowerCase())}catch(Q){b.error=b.error||"Host's domain name can not be converted to ASCII via punycode: "+Q}ae(b,c)}else ae(b,D);W&&W.parse&&W.parse(b,l)}else b.error=b.error||"URI can not be parsed.";return b}function Rt(y,l){var b=l.iri!==!1?m:c,D=[];return y.userinfo!==void 0&&(D.push(y.userinfo),D.push("@")),y.host!==void 0&&D.push(yt(Ke(String(y.host),b),b).replace(b.IPV6ADDRESS,function(C,W,Q){return"["+W+(Q?"%25"+Q:"")+"]"})),(typeof y.port=="number"||typeof y.port=="string")&&(D.push(":"),D.push(String(y.port))),D.length?D.join(""):void 0}var at=/^\.\.?\//,X=/^\/\.(\/|$)/,st=/^\/\.\.(\/|$)/,_t=/^\/?(?:.|\n)*?(?=\/|$)/;function qe(y){for(var l=[];y.length;)if(y.match(at))y=y.replace(at,"");else if(y.match(X))y=y.replace(X,"/");else if(y.match(st))y=y.replace(st,"/"),l.pop();else if(y==="."||y==="..")y="";else{var b=y.match(_t);if(b){var D=b[0];y=y.slice(D.length),l.push(D)}else throw new Error("Unexpected dot segment condition")}return l.join("")}function Ae(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=l.iri?m:c,D=[],C=q[(l.scheme||y.scheme||"").toLowerCase()];if(C&&C.serialize&&C.serialize(y,l),y.host&&!b.IPV6ADDRESS.test(y.host)){if(l.domainHost||C&&C.domainHost)try{y.host=l.iri?A.toUnicode(y.host):A.toASCII(y.host.replace(b.PCT_ENCODED,te).toLowerCase())}catch(le){y.error=y.error||"Host's domain name can not be converted to "+(l.iri?"Unicode":"ASCII")+" via punycode: "+le}}ae(y,b),l.reference!=="suffix"&&y.scheme&&(D.push(y.scheme),D.push(":"));var W=Rt(y,l);if(W!==void 0&&(l.reference!=="suffix"&&D.push("//"),D.push(W),y.path&&y.path.charAt(0)!=="/"&&D.push("/")),y.path!==void 0){var Q=y.path;!l.absolutePath&&(!C||!C.absolutePath)&&(Q=qe(Q)),W===void 0&&(Q=Q.replace(/^\/\//,"/%2F")),D.push(Q)}return y.query!==void 0&&(D.push("?"),D.push(y.query)),y.fragment!==void 0&&(D.push("#"),D.push(y.fragment)),D.join("")}function gt(y,l){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},D=arguments[3],C={};return D||(y=De(Ae(y,b),b),l=De(Ae(l,b),b)),b=b||{},!b.tolerant&&l.scheme?(C.scheme=l.scheme,C.userinfo=l.userinfo,C.host=l.host,C.port=l.port,C.path=qe(l.path||""),C.query=l.query):(l.userinfo!==void 0||l.host!==void 0||l.port!==void 0?(C.userinfo=l.userinfo,C.host=l.host,C.port=l.port,C.path=qe(l.path||""),C.query=l.query):(l.path?(l.path.charAt(0)==="/"?C.path=qe(l.path):((y.userinfo!==void 0||y.host!==void 0||y.port!==void 0)&&!y.path?C.path="/"+l.path:y.path?C.path=y.path.slice(0,y.path.lastIndexOf("/")+1)+l.path:C.path=l.path,C.path=qe(C.path)),C.query=l.query):(C.path=y.path,l.query!==void 0?C.query=l.query:C.query=y.query),C.userinfo=y.userinfo,C.host=y.host,C.port=y.port),C.scheme=y.scheme),C.fragment=l.fragment,C}function Ct(y,l,b){var D=f({scheme:"null"},b);return Ae(gt(De(y,D),De(l,D),D,!0),D)}function i(y,l){return typeof y=="string"?y=Ae(De(y,l),l):s(y)==="object"&&(y=De(Ae(y,l),l)),y}function h(y,l,b){return typeof y=="string"?y=Ae(De(y,b),b):s(y)==="object"&&(y=Ae(y,b)),typeof l=="string"?l=Ae(De(l,b),b):s(l)==="object"&&(l=Ae(l,b)),y===l}function w(y,l){return y&&y.toString().replace(!l||!l.iri?c.ESCAPE:m.ESCAPE,H)}function R(y,l){return y&&y.toString().replace(!l||!l.iri?c.PCT_ENCODED:m.PCT_ENCODED,te)}var M={scheme:"http",domainHost:!0,parse:function(l,b){return l.host||(l.error=l.error||"HTTP URIs must have a host."),l},serialize:function(l,b){var D=String(l.scheme).toLowerCase()==="https";return(l.port===(D?443:80)||l.port==="")&&(l.port=void 0),l.path||(l.path="/"),l}},B={scheme:"https",domainHost:M.domainHost,parse:M.parse,serialize:M.serialize};function re(y){return typeof y.secure=="boolean"?y.secure:String(y.scheme).toLowerCase()==="wss"}var se={scheme:"ws",domainHost:!0,parse:function(l,b){var D=l;return D.secure=re(D),D.resourceName=(D.path||"/")+(D.query?"?"+D.query:""),D.path=void 0,D.query=void 0,D},serialize:function(l,b){if((l.port===(re(l)?443:80)||l.port==="")&&(l.port=void 0),typeof l.secure=="boolean"&&(l.scheme=l.secure?"wss":"ws",l.secure=void 0),l.resourceName){var D=l.resourceName.split("?"),C=j(D,2),W=C[0],Q=C[1];l.path=W&&W!=="/"?W:void 0,l.query=Q,l.resourceName=void 0}return l.fragment=void 0,l}},je={scheme:"wss",domainHost:se.domainHost,parse:se.parse,serialize:se.serialize},We={},Se="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",G="[0-9A-Fa-f]",Qe=a(a("%[EFef]"+G+"%"+G+G+"%"+G+G)+"|"+a("%[89A-Fa-f]"+G+"%"+G+G)+"|"+a("%"+G+G)),dn="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",sr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Rr=n(sr,'[\\"\\\\]'),Cr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ir=new RegExp(Se,"g"),Re=new RegExp(Qe,"g"),Ir=new RegExp(n("[^]",dn,"[\\.]",'[\\"]',Rr),"g"),qt=new RegExp(n("[^]",Se,Cr),"g"),Dr=qt;function It(y){var l=te(y);return l.match(ir)?l:y}var Ht={scheme:"mailto",parse:function(l,b){var D=l,C=D.to=D.path?D.path.split(","):[];if(D.path=void 0,D.query){for(var W=!1,Q={},le=D.query.split("&"),ye=0,Pe=le.length;ye<Pe;++ye){var ue=le[ye].split("=");switch(ue[0]){case"to":for(var ve=ue[1].split(","),Oe=0,ne=ve.length;Oe<ne;++Oe)C.push(ve[Oe]);break;case"subject":D.subject=R(ue[1],b);break;case"body":D.body=R(ue[1],b);break;default:W=!0,Q[R(ue[0],b)]=R(ue[1],b);break}}W&&(D.headers=Q)}D.query=void 0;for(var $e=0,Te=C.length;$e<Te;++$e){var be=C[$e].split("@");if(be[0]=R(be[0]),b.unicodeSupport)be[1]=R(be[1],b).toLowerCase();else try{be[1]=A.toASCII(R(be[1],b).toLowerCase())}catch(bt){D.error=D.error||"Email address's domain name can not be converted to ASCII via punycode: "+bt}C[$e]=be.join("@")}return D},serialize:function(l,b){var D=l,C=d(l.to);if(C){for(var W=0,Q=C.length;W<Q;++W){var le=String(C[W]),ye=le.lastIndexOf("@"),Pe=le.slice(0,ye).replace(Re,It).replace(Re,u).replace(Ir,H),ue=le.slice(ye+1);try{ue=b.iri?A.toUnicode(ue):A.toASCII(R(ue,b).toLowerCase())}catch($e){D.error=D.error||"Email address's domain name can not be converted to "+(b.iri?"Unicode":"ASCII")+" via punycode: "+$e}C[W]=Pe+"@"+ue}D.path=C.join(",")}var ve=l.headers=l.headers||{};l.subject&&(ve.subject=l.subject),l.body&&(ve.body=l.body);var Oe=[];for(var ne in ve)ve[ne]!==We[ne]&&Oe.push(ne.replace(Re,It).replace(Re,u).replace(qt,H)+"="+ve[ne].replace(Re,It).replace(Re,u).replace(Dr,H));return Oe.length&&(D.query=Oe.join("&")),D}},Bt=/^([^\:]+)\:(.*)/,Jt={scheme:"urn",parse:function(l,b){var D=l.path&&l.path.match(Bt),C=l;if(D){var W=b.scheme||C.scheme||"urn",Q=D[1].toLowerCase(),le=D[2],ye=W+":"+(b.nid||Q),Pe=q[ye];C.nid=Q,C.nss=le,C.path=void 0,Pe&&(C=Pe.parse(C,b))}else C.error=C.error||"URN can not be parsed.";return C},serialize:function(l,b){var D=b.scheme||l.scheme||"urn",C=l.nid,W=D+":"+(b.nid||C),Q=q[W];Q&&(l=Q.serialize(l,b));var le=l,ye=l.nss;return le.path=(C||b.nid)+":"+ye,le}},Ar=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,or={scheme:"urn:uuid",parse:function(l,b){var D=l;return D.uuid=D.nss,D.nss=void 0,!b.tolerant&&(!D.uuid||!D.uuid.match(Ar))&&(D.error=D.error||"UUID is not valid."),D},serialize:function(l,b){var D=l;return D.nss=(l.uuid||"").toLowerCase(),D}};q[M.scheme]=M,q[B.scheme]=B,q[se.scheme]=se,q[je.scheme]=je,q[Ht.scheme]=Ht,q[Jt.scheme]=Jt,q[or.scheme]=or,r.SCHEMES=q,r.pctEncChar=H,r.pctDecChars=te,r.parse=De,r.removeDotSegments=qe,r.serialize=Ae,r.resolveComponents=gt,r.resolve=Ct,r.normalize=i,r.equal=h,r.escapeComponent=w,r.unescapeComponent=R,Object.defineProperty(r,"__esModule",{value:!0})})})(So,Zr);Object.defineProperty(An,"__esModule",{value:!0});const us=Zr;us.code='require("ajv/dist/runtime/uri").default';An.default=us;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=rt;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=oe;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Tr,a=Nr,s=Lt,u=Le,d=oe,f=Ie,p=kr,c=de,m=Eo,j=An,v=(K,P)=>new RegExp(K,P);v.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],O=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),E={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},$={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},I=200;function T(K){var P,U,k,o,g,A,q,H,te,ae,me,Ke,yt,Nt,jt,De,Rt,at,X,st,_t,qe,Ae,gt,Ct;const i=K.strict,h=(P=K.code)===null||P===void 0?void 0:P.optimize,w=h===!0||h===void 0?1:h||0,R=(k=(U=K.code)===null||U===void 0?void 0:U.regExp)!==null&&k!==void 0?k:v,M=(o=K.uriResolver)!==null&&o!==void 0?o:j.default;return{strictSchema:(A=(g=K.strictSchema)!==null&&g!==void 0?g:i)!==null&&A!==void 0?A:!0,strictNumbers:(H=(q=K.strictNumbers)!==null&&q!==void 0?q:i)!==null&&H!==void 0?H:!0,strictTypes:(ae=(te=K.strictTypes)!==null&&te!==void 0?te:i)!==null&&ae!==void 0?ae:"log",strictTuples:(Ke=(me=K.strictTuples)!==null&&me!==void 0?me:i)!==null&&Ke!==void 0?Ke:"log",strictRequired:(Nt=(yt=K.strictRequired)!==null&&yt!==void 0?yt:i)!==null&&Nt!==void 0?Nt:!1,code:K.code?{...K.code,optimize:w,regExp:R}:{optimize:w,regExp:R},loopRequired:(jt=K.loopRequired)!==null&&jt!==void 0?jt:I,loopEnum:(De=K.loopEnum)!==null&&De!==void 0?De:I,meta:(Rt=K.meta)!==null&&Rt!==void 0?Rt:!0,messages:(at=K.messages)!==null&&at!==void 0?at:!0,inlineRefs:(X=K.inlineRefs)!==null&&X!==void 0?X:!0,schemaId:(st=K.schemaId)!==null&&st!==void 0?st:"$id",addUsedSchema:(_t=K.addUsedSchema)!==null&&_t!==void 0?_t:!0,validateSchema:(qe=K.validateSchema)!==null&&qe!==void 0?qe:!0,validateFormats:(Ae=K.validateFormats)!==null&&Ae!==void 0?Ae:!0,unicodeRegExp:(gt=K.unicodeRegExp)!==null&&gt!==void 0?gt:!0,int32range:(Ct=K.int32range)!==null&&Ct!==void 0?Ct:!0,uriResolver:M}}class F{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,...T(P)};const{es5:U,lines:k}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:O,es5:U,lines:k}),this.logger=Z(P.logger);const o=P.validateFormats;P.validateFormats=!1,this.RULES=(0,s.getRules)(),z.call(this,E,P,"NOT SUPPORTED"),z.call(this,$,P,"DEPRECATED","warn"),this._metaOpts=L.call(this),P.formats&&V.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&x.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),N.call(this),P.validateFormats=o}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:U,schemaId:k}=this.opts;let o=m;k==="id"&&(o={...m},o.id=o.$id,delete o.$id),U&&P&&this.addMetaSchema(o,o[k],!1)}defaultMeta(){const{meta:P,schemaId:U}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[U]||P:void 0}validate(P,U){let k;if(typeof P=="string"){if(k=this.getSchema(P),!k)throw new Error(`no schema with key or ref "${P}"`)}else k=this.compile(P);const o=k(U);return"$async"in k||(this.errors=k.errors),o}compile(P,U){const k=this._addSchema(P,U);return k.validate||this._compileSchemaEnv(k)}compileAsync(P,U){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:k}=this.opts;return o.call(this,P,U);async function o(ae,me){await g.call(this,ae.$schema);const Ke=this._addSchema(ae,me);return Ke.validate||A.call(this,Ke)}async function g(ae){ae&&!this.getSchema(ae)&&await o.call(this,{$ref:ae},!0)}async function A(ae){try{return this._compileSchemaEnv(ae)}catch(me){if(!(me instanceof a.default))throw me;return q.call(this,me),await H.call(this,me.missingSchema),A.call(this,ae)}}function q({missingSchema:ae,missingRef:me}){if(this.refs[ae])throw new Error(`AnySchema ${ae} is loaded but ${me} cannot be resolved`)}async function H(ae){const me=await te.call(this,ae);this.refs[ae]||await g.call(this,me.$schema),this.refs[ae]||this.addSchema(me,ae,U)}async function te(ae){const me=this._loading[ae];if(me)return me;try{return await(this._loading[ae]=k(ae))}finally{delete this._loading[ae]}}}addSchema(P,U,k,o=this.opts.validateSchema){if(Array.isArray(P)){for(const A of P)this.addSchema(A,void 0,k,o);return this}let g;if(typeof P=="object"){const{schemaId:A}=this.opts;if(g=P[A],g!==void 0&&typeof g!="string")throw new Error(`schema ${A} must be string`)}return U=(0,f.normalizeId)(U||g),this._checkUnique(U),this.schemas[U]=this._addSchema(P,k,U,o,!0),this}addMetaSchema(P,U,k=this.opts.validateSchema){return this.addSchema(P,U,!0,k),this}validateSchema(P,U){if(typeof P=="boolean")return!0;let k;if(k=P.$schema,k!==void 0&&typeof k!="string")throw new Error("$schema must be a string");if(k=k||this.opts.defaultMeta||this.defaultMeta(),!k)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const o=this.validate(k,P);if(!o&&U){const g="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(g);else throw new Error(g)}return o}getSchema(P){let U;for(;typeof(U=S.call(this,P))=="string";)P=U;if(U===void 0){const{schemaId:k}=this.opts,o=new u.SchemaEnv({schema:{},schemaId:k});if(U=u.resolveSchema.call(this,o,P),!U)return;this.refs[P]=U}return U.validate||this._compileSchemaEnv(U)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const U=S.call(this,P);return typeof U=="object"&&this._cache.delete(U.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const U=P;this._cache.delete(U);let k=P[this.opts.schemaId];return k&&(k=(0,f.normalizeId)(k),delete this.schemas[k],delete this.refs[k]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const U of P)this.addKeyword(U);return this}addKeyword(P,U){let k;if(typeof P=="string")k=P,typeof U=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),U.keyword=k);else if(typeof P=="object"&&U===void 0){if(U=P,k=U.keyword,Array.isArray(k)&&!k.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(pe.call(this,k,U),!U)return(0,c.eachItem)(k,g=>Je.call(this,g)),this;Ye.call(this,U);const o={...U,type:(0,p.getJSONTypes)(U.type),schemaType:(0,p.getJSONTypes)(U.schemaType)};return(0,c.eachItem)(k,o.type.length===0?g=>Je.call(this,g,o):g=>o.type.forEach(A=>Je.call(this,g,o,A))),this}getKeyword(P){const U=this.RULES.all[P];return typeof U=="object"?U.definition:!!U}removeKeyword(P){const{RULES:U}=this;delete U.keywords[P],delete U.all[P];for(const k of U.rules){const o=k.rules.findIndex(g=>g.keyword===P);o>=0&&k.rules.splice(o,1)}return this}addFormat(P,U){return typeof U=="string"&&(U=new RegExp(U)),this.formats[P]=U,this}errorsText(P=this.errors,{separator:U=", ",dataVar:k="data"}={}){return!P||P.length===0?"No errors":P.map(o=>`${k}${o.instancePath} ${o.message}`).reduce((o,g)=>o+U+g)}$dataMetaSchema(P,U){const k=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const o of U){const g=o.split("/").slice(1);let A=P;for(const q of g)A=A[q];for(const q in k){const H=k[q];if(typeof H!="object")continue;const{$data:te}=H.definition,ae=A[q];te&&ae&&(A[q]=xe(ae))}}return P}_removeAllSchemas(P,U){for(const k in P){const o=P[k];(!U||U.test(k))&&(typeof o=="string"?delete P[k]:o&&!o.meta&&(this._cache.delete(o.schema),delete P[k]))}}_addSchema(P,U,k,o=this.opts.validateSchema,g=this.opts.addUsedSchema){let A;const{schemaId:q}=this.opts;if(typeof P=="object")A=P[q];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let H=this._cache.get(P);if(H!==void 0)return H;k=(0,f.normalizeId)(A||k);const te=f.getSchemaRefs.call(this,P,k);return H=new u.SchemaEnv({schema:P,schemaId:q,meta:U,baseId:k,localRefs:te}),this._cache.set(H.schema,H),g&&!k.startsWith("#")&&(k&&this._checkUnique(k),this.refs[k]=H),o&&this.validateSchema(P,!0),H}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):u.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const U=this.opts;this.opts=this._metaOpts;try{u.compileSchema.call(this,P)}finally{this.opts=U}}}e.default=F,F.ValidationError=n.default,F.MissingRefError=a.default;function z(K,P,U,k="error"){for(const o in K){const g=o;g in P&&this.logger[k](`${U}: option ${o}. ${K[g]}`)}}function S(K){return K=(0,f.normalizeId)(K),this.schemas[K]||this.refs[K]}function N(){const K=this.opts.schemas;if(K)if(Array.isArray(K))this.addSchema(K);else for(const P in K)this.addSchema(K[P],P)}function V(){for(const K in this.opts.formats){const P=this.opts.formats[K];P&&this.addFormat(K,P)}}function x(K){if(Array.isArray(K)){this.addVocabulary(K);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in K){const U=K[P];U.keyword||(U.keyword=P),this.addKeyword(U)}}function L(){const K={...this.opts};for(const P of _)delete K[P];return K}const J={log(){},warn(){},error(){}};function Z(K){if(K===!1)return J;if(K===void 0)return console;if(K.log&&K.warn&&K.error)return K;throw new Error("logger must implement log, warn and error methods")}const Ne=/^[a-z_$][a-z0-9_$:-]*$/i;function pe(K,P){const{RULES:U}=this;if((0,c.eachItem)(K,k=>{if(U.keywords[k])throw new Error(`Keyword ${k} is already defined`);if(!Ne.test(k))throw new Error(`Keyword ${k} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function Je(K,P,U){var k;const o=P==null?void 0:P.post;if(U&&o)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:g}=this;let A=o?g.post:g.rules.find(({type:H})=>H===U);if(A||(A={type:U,rules:[]},g.rules.push(A)),g.keywords[K]=!0,!P)return;const q={keyword:K,definition:{...P,type:(0,p.getJSONTypes)(P.type),schemaType:(0,p.getJSONTypes)(P.schemaType)}};P.before?Ge.call(this,A,q,P.before):A.rules.push(q),g.all[K]=q,(k=P.implements)===null||k===void 0||k.forEach(H=>this.addKeyword(H))}function Ge(K,P,U){const k=K.rules.findIndex(o=>o.keyword===U);k>=0?K.rules.splice(k,0,P):(K.rules.push(P),this.logger.warn(`rule ${U} is not defined`))}function Ye(K){let{metaSchema:P}=K;P!==void 0&&(K.$data&&this.opts.$data&&(P=xe(P)),K.validateSchema=this.compile(P,!0))}const nt={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function xe(K){return{anyOf:[K,nt]}}})(Ua);var Fn={},Mn={},Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});const Po={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Vn.default=Po;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.callRef=Kt.getValidate=void 0;const Oo=Nr,Oa=ie,Ve=oe,Qt=dt,ka=Le,zr=de,ko={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:a,schemaEnv:s,validateName:u,opts:d,self:f}=n,{root:p}=s;if((r==="#"||r==="#/")&&a===p.baseId)return m();const c=ka.resolveRef.call(f,p,a,r);if(c===void 0)throw new Oo.default(n.opts.uriResolver,a,r);if(c instanceof ka.SchemaEnv)return j(c);return v(c);function m(){if(s===p)return Jr(e,u,s,s.$async);const _=t.scopeValue("root",{ref:p});return Jr(e,(0,Ve._)`${_}.validate`,p,p.$async)}function j(_){const O=cs(e,_);Jr(e,O,_,_.$async)}function v(_){const O=t.scopeValue("schema",d.code.source===!0?{ref:_,code:(0,Ve.stringify)(_)}:{ref:_}),E=t.name("valid"),$=e.subschema({schema:_,dataTypes:[],schemaPath:Ve.nil,topSchemaRef:O,errSchemaPath:r},E);e.mergeEvaluated($),e.ok(E)}}};function cs(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ve._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Kt.getValidate=cs;function Jr(e,t,r,n){const{gen:a,it:s}=e,{allErrors:u,schemaEnv:d,opts:f}=s,p=f.passContext?Qt.default.this:Ve.nil;n?c():m();function c(){if(!d.$async)throw new Error("async schema referenced by sync schema");const _=a.let("valid");a.try(()=>{a.code((0,Ve._)`await ${(0,Oa.callValidateCode)(e,t,p)}`),v(t),u||a.assign(_,!0)},O=>{a.if((0,Ve._)`!(${O} instanceof ${s.ValidationError})`,()=>a.throw(O)),j(O),u||a.assign(_,!1)}),e.ok(_)}function m(){e.result((0,Oa.callValidateCode)(e,t,p),()=>v(t),()=>j(t))}function j(_){const O=(0,Ve._)`${_}.errors`;a.assign(Qt.default.vErrors,(0,Ve._)`${Qt.default.vErrors} === null ? ${O} : ${Qt.default.vErrors}.concat(${O})`),a.assign(Qt.default.errors,(0,Ve._)`${Qt.default.vErrors}.length`)}function v(_){var O;if(!s.opts.unevaluated)return;const E=(O=r==null?void 0:r.validate)===null||O===void 0?void 0:O.evaluated;if(s.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(s.props=zr.mergeEvaluated.props(a,E.props,s.props));else{const $=a.var("props",(0,Ve._)`${_}.evaluated.props`);s.props=zr.mergeEvaluated.props(a,$,s.props,Ve.Name)}if(s.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(s.items=zr.mergeEvaluated.items(a,E.items,s.items));else{const $=a.var("items",(0,Ve._)`${_}.evaluated.items`);s.items=zr.mergeEvaluated.items(a,$,s.items,Ve.Name)}}}Kt.callRef=Jr;Kt.default=ko;Object.defineProperty(Mn,"__esModule",{value:!0});const To=Vn,No=Kt,jo=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",To.default,No.default];Mn.default=jo;var Un={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});const en=oe,Et=en.operators,tn={maximum:{okStr:"<=",ok:Et.LTE,fail:Et.GT},minimum:{okStr:">=",ok:Et.GTE,fail:Et.LT},exclusiveMaximum:{okStr:"<",ok:Et.LT,fail:Et.GTE},exclusiveMinimum:{okStr:">",ok:Et.GT,fail:Et.LTE}},Ro={message:({keyword:e,schemaCode:t})=>(0,en.str)`must be ${tn[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,en._)`{comparison: ${tn[e].okStr}, limit: ${t}}`},Co={keyword:Object.keys(tn),type:"number",schemaType:"number",$data:!0,error:Ro,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,en._)`${r} ${tn[t].fail} ${n} || isNaN(${r})`)}};zn.default=Co;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});const vr=oe,Io={message:({schemaCode:e})=>(0,vr.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,vr._)`{multipleOf: ${e}}`},Do={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Io,code(e){const{gen:t,data:r,schemaCode:n,it:a}=e,s=a.opts.multipleOfPrecision,u=t.let("res"),d=s?(0,vr._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${s}`:(0,vr._)`${u} !== parseInt(${u})`;e.fail$data((0,vr._)`(${n} === 0 || (${u} = ${r}/${n}, ${d}))`)}};Ln.default=Do;var Kn={},qn={};Object.defineProperty(qn,"__esModule",{value:!0});function ls(e){const t=e.length;let r=0,n=0,a;for(;n<t;)r++,a=e.charCodeAt(n++),a>=55296&&a<=56319&&n<t&&(a=e.charCodeAt(n),(a&64512)===56320&&n++);return r}qn.default=ls;ls.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Kn,"__esModule",{value:!0});const Ut=oe,Ao=de,Fo=qn,Mo={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,Ut.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Ut._)`{limit: ${e}}`},Vo={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Mo,code(e){const{keyword:t,data:r,schemaCode:n,it:a}=e,s=t==="maxLength"?Ut.operators.GT:Ut.operators.LT,u=a.opts.unicode===!1?(0,Ut._)`${r}.length`:(0,Ut._)`${(0,Ao.useFunc)(e.gen,Fo.default)}(${r})`;e.fail$data((0,Ut._)`${u} ${s} ${n}`)}};Kn.default=Vo;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const Uo=ie,rn=oe,zo={message:({schemaCode:e})=>(0,rn.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,rn._)`{pattern: ${e}}`},Lo={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:zo,code(e){const{data:t,$data:r,schema:n,schemaCode:a,it:s}=e,u=s.opts.unicodeRegExp?"u":"",d=r?(0,rn._)`(new RegExp(${a}, ${u}))`:(0,Uo.usePattern)(e,n);e.fail$data((0,rn._)`!${d}.test(${t})`)}};Hn.default=Lo;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});const yr=oe,Ko={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,yr.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,yr._)`{limit: ${e}}`},qo={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ko,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxProperties"?yr.operators.GT:yr.operators.LT;e.fail$data((0,yr._)`Object.keys(${r}).length ${a} ${n}`)}};Bn.default=qo;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});const fr=ie,_r=oe,Ho=de,Bo={message:({params:{missingProperty:e}})=>(0,_r.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,_r._)`{missingProperty: ${e}}`},Jo={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Bo,code(e){const{gen:t,schema:r,schemaCode:n,data:a,$data:s,it:u}=e,{opts:d}=u;if(!s&&r.length===0)return;const f=r.length>=d.loopRequired;if(u.allErrors?p():c(),d.strictRequired){const v=e.parentSchema.properties,{definedProperties:_}=e.it;for(const O of r)if((v==null?void 0:v[O])===void 0&&!_.has(O)){const E=u.schemaEnv.baseId+u.errSchemaPath,$=`required property "${O}" is not defined at "${E}" (strictRequired)`;(0,Ho.checkStrictMode)(u,$,u.opts.strictRequired)}}function p(){if(f||s)e.block$data(_r.nil,m);else for(const v of r)(0,fr.checkReportMissingProp)(e,v)}function c(){const v=t.let("missing");if(f||s){const _=t.let("valid",!0);e.block$data(_,()=>j(v,_)),e.ok(_)}else t.if((0,fr.checkMissingProp)(e,r,v)),(0,fr.reportMissingProp)(e,v),t.else()}function m(){t.forOf("prop",n,v=>{e.setParams({missingProperty:v}),t.if((0,fr.noPropertyInData)(t,a,v,d.ownProperties),()=>e.error())})}function j(v,_){e.setParams({missingProperty:v}),t.forOf(v,n,()=>{t.assign(_,(0,fr.propertyInData)(t,a,v,d.ownProperties)),t.if((0,_r.not)(_),()=>{e.error(),t.break()})},_r.nil)}}};Jn.default=Jo;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});const gr=oe,Go={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,gr.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,gr._)`{limit: ${e}}`},Yo={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Go,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxItems"?gr.operators.GT:gr.operators.LT;e.fail$data((0,gr._)`${r}.length ${a} ${n}`)}};Gn.default=Yo;var Yn={},jr={};Object.defineProperty(jr,"__esModule",{value:!0});const fs=Ga;fs.code='require("ajv/dist/runtime/equal").default';jr.default=fs;Object.defineProperty(Yn,"__esModule",{value:!0});const yn=kr,Ce=oe,xo=de,Wo=jr,Qo={message:({params:{i:e,j:t}})=>(0,Ce.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ce._)`{i: ${e}, j: ${t}}`},Xo={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Qo,code(e){const{gen:t,data:r,$data:n,schema:a,parentSchema:s,schemaCode:u,it:d}=e;if(!n&&!a)return;const f=t.let("valid"),p=s.items?(0,yn.getSchemaTypes)(s.items):[];e.block$data(f,c,(0,Ce._)`${u} === false`),e.ok(f);function c(){const _=t.let("i",(0,Ce._)`${r}.length`),O=t.let("j");e.setParams({i:_,j:O}),t.assign(f,!0),t.if((0,Ce._)`${_} > 1`,()=>(m()?j:v)(_,O))}function m(){return p.length>0&&!p.some(_=>_==="object"||_==="array")}function j(_,O){const E=t.name("item"),$=(0,yn.checkDataTypes)(p,E,d.opts.strictNumbers,yn.DataType.Wrong),I=t.const("indices",(0,Ce._)`{}`);t.for((0,Ce._)`;${_}--;`,()=>{t.let(E,(0,Ce._)`${r}[${_}]`),t.if($,(0,Ce._)`continue`),p.length>1&&t.if((0,Ce._)`typeof ${E} == "string"`,(0,Ce._)`${E} += "_"`),t.if((0,Ce._)`typeof ${I}[${E}] == "number"`,()=>{t.assign(O,(0,Ce._)`${I}[${E}]`),e.error(),t.assign(f,!1).break()}).code((0,Ce._)`${I}[${E}] = ${_}`)})}function v(_,O){const E=(0,xo.useFunc)(t,Wo.default),$=t.name("outer");t.label($).for((0,Ce._)`;${_}--;`,()=>t.for((0,Ce._)`${O} = ${_}; ${O}--;`,()=>t.if((0,Ce._)`${E}(${r}[${_}], ${r}[${O}])`,()=>{e.error(),t.assign(f,!1).break($)})))}}};Yn.default=Xo;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});const wn=oe,Zo=de,eu=jr,tu={message:"must be equal to constant",params:({schemaCode:e})=>(0,wn._)`{allowedValue: ${e}}`},ru={keyword:"const",$data:!0,error:tu,code(e){const{gen:t,data:r,$data:n,schemaCode:a,schema:s}=e;n||s&&typeof s=="object"?e.fail$data((0,wn._)`!${(0,Zo.useFunc)(t,eu.default)}(${r}, ${a})`):e.fail((0,wn._)`${s} !== ${r}`)}};xn.default=ru;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});const hr=oe,nu=de,au=jr,su={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,hr._)`{allowedValues: ${e}}`},iu={keyword:"enum",schemaType:"array",$data:!0,error:su,code(e){const{gen:t,data:r,$data:n,schema:a,schemaCode:s,it:u}=e;if(!n&&a.length===0)throw new Error("enum must have non-empty array");const d=a.length>=u.opts.loopEnum;let f;const p=()=>f??(f=(0,nu.useFunc)(t,au.default));let c;if(d||n)c=t.let("valid"),e.block$data(c,m);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const v=t.const("vSchema",s);c=(0,hr.or)(...a.map((_,O)=>j(v,O)))}e.pass(c);function m(){t.assign(c,!1),t.forOf("v",s,v=>t.if((0,hr._)`${p()}(${r}, ${v})`,()=>t.assign(c,!0).break()))}function j(v,_){const O=a[_];return typeof O=="object"&&O!==null?(0,hr._)`${p()}(${r}, ${v}[${_}])`:(0,hr._)`${r} === ${O}`}}};Wn.default=iu;Object.defineProperty(Un,"__esModule",{value:!0});const ou=zn,uu=Ln,cu=Kn,lu=Hn,fu=Bn,du=Jn,hu=Gn,pu=Yn,mu=xn,vu=Wn,yu=[ou.default,uu.default,cu.default,lu.default,fu.default,du.default,hu.default,pu.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},mu.default,vu.default];Un.default=yu;var Qn={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.validateAdditionalItems=void 0;const zt=oe,En=de,_u={message:({params:{len:e}})=>(0,zt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,zt._)`{limit: ${e}}`},gu={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:_u,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,En.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ds(e,n)}};function ds(e,t){const{gen:r,schema:n,data:a,keyword:s,it:u}=e;u.items=!0;const d=r.const("len",(0,zt._)`${a}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,zt._)`${d} <= ${t.length}`);else if(typeof n=="object"&&!(0,En.alwaysValidSchema)(u,n)){const p=r.var("valid",(0,zt._)`${d} <= ${t.length}`);r.if((0,zt.not)(p),()=>f(p)),e.ok(p)}function f(p){r.forRange("i",t.length,d,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:En.Type.Num},p),u.allErrors||r.if((0,zt.not)(p),()=>r.break())})}}nr.validateAdditionalItems=ds;nr.default=gu;var Xn={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.validateTuple=void 0;const Ta=oe,Gr=de,$u=ie,bu={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return hs(e,"additionalItems",t);r.items=!0,!(0,Gr.alwaysValidSchema)(r,t)&&e.ok((0,$u.validateArray)(e))}};function hs(e,t,r=e.schema){const{gen:n,parentSchema:a,data:s,keyword:u,it:d}=e;c(a),d.opts.unevaluated&&r.length&&d.items!==!0&&(d.items=Gr.mergeEvaluated.items(n,r.length,d.items));const f=n.name("valid"),p=n.const("len",(0,Ta._)`${s}.length`);r.forEach((m,j)=>{(0,Gr.alwaysValidSchema)(d,m)||(n.if((0,Ta._)`${p} > ${j}`,()=>e.subschema({keyword:u,schemaProp:j,dataProp:j},f)),e.ok(f))});function c(m){const{opts:j,errSchemaPath:v}=d,_=r.length,O=_===m.minItems&&(_===m.maxItems||m[t]===!1);if(j.strictTuples&&!O){const E=`"${u}" is ${_}-tuple, but minItems or maxItems/${t} are not specified or different at path "${v}"`;(0,Gr.checkStrictMode)(d,E,j.strictTuples)}}}ar.validateTuple=hs;ar.default=bu;Object.defineProperty(Xn,"__esModule",{value:!0});const wu=ar,Eu={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,wu.validateTuple)(e,"items")};Xn.default=Eu;var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});const Na=oe,Su=de,Pu=ie,Ou=nr,ku={message:({params:{len:e}})=>(0,Na.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Na._)`{limit: ${e}}`},Tu={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ku,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,!(0,Su.alwaysValidSchema)(n,t)&&(a?(0,Ou.validateAdditionalItems)(e,a):e.ok((0,Pu.validateArray)(e)))}};Zn.default=Tu;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});const Be=oe,Lr=de,Nu={message:({params:{min:e,max:t}})=>t===void 0?(0,Be.str)`must contain at least ${e} valid item(s)`:(0,Be.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Be._)`{minContains: ${e}}`:(0,Be._)`{minContains: ${e}, maxContains: ${t}}`},ju={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Nu,code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:s}=e;let u,d;const{minContains:f,maxContains:p}=n;s.opts.next?(u=f===void 0?1:f,d=p):u=1;const c=t.const("len",(0,Be._)`${a}.length`);if(e.setParams({min:u,max:d}),d===void 0&&u===0){(0,Lr.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&u>d){(0,Lr.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Lr.alwaysValidSchema)(s,r)){let O=(0,Be._)`${c} >= ${u}`;d!==void 0&&(O=(0,Be._)`${O} && ${c} <= ${d}`),e.pass(O);return}s.items=!0;const m=t.name("valid");d===void 0&&u===1?v(m,()=>t.if(m,()=>t.break())):u===0?(t.let(m,!0),d!==void 0&&t.if((0,Be._)`${a}.length > 0`,j)):(t.let(m,!1),j()),e.result(m,()=>e.reset());function j(){const O=t.name("_valid"),E=t.let("count",0);v(O,()=>t.if(O,()=>_(E)))}function v(O,E){t.forRange("i",0,c,$=>{e.subschema({keyword:"contains",dataProp:$,dataPropType:Lr.Type.Num,compositeRule:!0},O),E()})}function _(O){t.code((0,Be._)`${O}++`),d===void 0?t.if((0,Be._)`${O} >= ${u}`,()=>t.assign(m,!0).break()):(t.if((0,Be._)`${O} > ${d}`,()=>t.assign(m,!1).break()),u===1?t.assign(m,!0):t.if((0,Be._)`${O} >= ${u}`,()=>t.assign(m,!0)))}}};ea.default=ju;var ps={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=oe,r=de,n=ie;e.error={message:({params:{property:f,depsCount:p,deps:c}})=>{const m=p===1?"property":"properties";return(0,t.str)`must have ${m} ${c} when property ${f} is present`},params:({params:{property:f,depsCount:p,deps:c,missingProperty:m}})=>(0,t._)`{property: ${f},
    missingProperty: ${m},
    depsCount: ${p},
    deps: ${c}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(f){const[p,c]=s(f);u(f,p),d(f,c)}};function s({schema:f}){const p={},c={};for(const m in f){if(m==="__proto__")continue;const j=Array.isArray(f[m])?p:c;j[m]=f[m]}return[p,c]}function u(f,p=f.schema){const{gen:c,data:m,it:j}=f;if(Object.keys(p).length===0)return;const v=c.let("missing");for(const _ in p){const O=p[_];if(O.length===0)continue;const E=(0,n.propertyInData)(c,m,_,j.opts.ownProperties);f.setParams({property:_,depsCount:O.length,deps:O.join(", ")}),j.allErrors?c.if(E,()=>{for(const $ of O)(0,n.checkReportMissingProp)(f,$)}):(c.if((0,t._)`${E} && (${(0,n.checkMissingProp)(f,O,v)})`),(0,n.reportMissingProp)(f,v),c.else())}}e.validatePropertyDeps=u;function d(f,p=f.schema){const{gen:c,data:m,keyword:j,it:v}=f,_=c.name("valid");for(const O in p)(0,r.alwaysValidSchema)(v,p[O])||(c.if((0,n.propertyInData)(c,m,O,v.opts.ownProperties),()=>{const E=f.subschema({keyword:j,schemaProp:O},_);f.mergeValidEvaluated(E,_)},()=>c.var(_,!0)),f.ok(_))}e.validateSchemaDeps=d,e.default=a})(ps);var ta={};Object.defineProperty(ta,"__esModule",{value:!0});const ms=oe,Ru=de,Cu={message:"property name must be valid",params:({params:e})=>(0,ms._)`{propertyName: ${e.propertyName}}`},Iu={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Cu,code(e){const{gen:t,schema:r,data:n,it:a}=e;if((0,Ru.alwaysValidSchema)(a,r))return;const s=t.name("valid");t.forIn("key",n,u=>{e.setParams({propertyName:u}),e.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},s),t.if((0,ms.not)(s),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(s)}};ta.default=Iu;var fn={};Object.defineProperty(fn,"__esModule",{value:!0});const Kr=ie,Ze=oe,Du=dt,qr=de,Au={message:"must NOT have additional properties",params:({params:e})=>(0,Ze._)`{additionalProperty: ${e.additionalProperty}}`},Fu={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Au,code(e){const{gen:t,schema:r,parentSchema:n,data:a,errsCount:s,it:u}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:d,opts:f}=u;if(u.props=!0,f.removeAdditional!=="all"&&(0,qr.alwaysValidSchema)(u,r))return;const p=(0,Kr.allSchemaProperties)(n.properties),c=(0,Kr.allSchemaProperties)(n.patternProperties);m(),e.ok((0,Ze._)`${s} === ${Du.default.errors}`);function m(){t.forIn("key",a,E=>{!p.length&&!c.length?_(E):t.if(j(E),()=>_(E))})}function j(E){let $;if(p.length>8){const I=(0,qr.schemaRefOrVal)(u,n.properties,"properties");$=(0,Kr.isOwnProperty)(t,I,E)}else p.length?$=(0,Ze.or)(...p.map(I=>(0,Ze._)`${E} === ${I}`)):$=Ze.nil;return c.length&&($=(0,Ze.or)($,...c.map(I=>(0,Ze._)`${(0,Kr.usePattern)(e,I)}.test(${E})`))),(0,Ze.not)($)}function v(E){t.code((0,Ze._)`delete ${a}[${E}]`)}function _(E){if(f.removeAdditional==="all"||f.removeAdditional&&r===!1){v(E);return}if(r===!1){e.setParams({additionalProperty:E}),e.error(),d||t.break();return}if(typeof r=="object"&&!(0,qr.alwaysValidSchema)(u,r)){const $=t.name("valid");f.removeAdditional==="failing"?(O(E,$,!1),t.if((0,Ze.not)($),()=>{e.reset(),v(E)})):(O(E,$),d||t.if((0,Ze.not)($),()=>t.break()))}}function O(E,$,I){const T={keyword:"additionalProperties",dataProp:E,dataPropType:qr.Type.Str};I===!1&&Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(T,$)}}};fn.default=Fu;var ra={};Object.defineProperty(ra,"__esModule",{value:!0});const Mu=rt,ja=ie,_n=de,Ra=fn,Vu={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:s}=e;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Ra.default.code(new Mu.KeywordCxt(s,Ra.default,"additionalProperties"));const u=(0,ja.allSchemaProperties)(r);for(const m of u)s.definedProperties.add(m);s.opts.unevaluated&&u.length&&s.props!==!0&&(s.props=_n.mergeEvaluated.props(t,(0,_n.toHash)(u),s.props));const d=u.filter(m=>!(0,_n.alwaysValidSchema)(s,r[m]));if(d.length===0)return;const f=t.name("valid");for(const m of d)p(m)?c(m):(t.if((0,ja.propertyInData)(t,a,m,s.opts.ownProperties)),c(m),s.allErrors||t.else().var(f,!0),t.endIf()),e.it.definedProperties.add(m),e.ok(f);function p(m){return s.opts.useDefaults&&!s.compositeRule&&r[m].default!==void 0}function c(m){e.subschema({keyword:"properties",schemaProp:m,dataProp:m},f)}}};ra.default=Vu;var na={};Object.defineProperty(na,"__esModule",{value:!0});const Ca=ie,Hr=oe,Ia=de,Da=de,Uu={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:a,it:s}=e,{opts:u}=s,d=(0,Ca.allSchemaProperties)(r),f=d.filter(O=>(0,Ia.alwaysValidSchema)(s,r[O]));if(d.length===0||f.length===d.length&&(!s.opts.unevaluated||s.props===!0))return;const p=u.strictSchema&&!u.allowMatchingProperties&&a.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof Hr.Name)&&(s.props=(0,Da.evaluatedPropsToName)(t,s.props));const{props:m}=s;j();function j(){for(const O of d)p&&v(O),s.allErrors?_(O):(t.var(c,!0),_(O),t.if(c))}function v(O){for(const E in p)new RegExp(O).test(E)&&(0,Ia.checkStrictMode)(s,`property ${E} matches pattern ${O} (use allowMatchingProperties)`)}function _(O){t.forIn("key",n,E=>{t.if((0,Hr._)`${(0,Ca.usePattern)(e,O)}.test(${E})`,()=>{const $=f.includes(O);$||e.subschema({keyword:"patternProperties",schemaProp:O,dataProp:E,dataPropType:Da.Type.Str},c),s.opts.unevaluated&&m!==!0?t.assign((0,Hr._)`${m}[${E}]`,!0):!$&&!s.allErrors&&t.if((0,Hr.not)(c),()=>t.break())})})}}};na.default=Uu;var aa={};Object.defineProperty(aa,"__esModule",{value:!0});const zu=de,Lu={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,zu.alwaysValidSchema)(n,r)){e.fail();return}const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};aa.default=Lu;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});const Ku=ie,qu={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ku.validateUnion,error:{message:"must match a schema in anyOf"}};sa.default=qu;var ia={};Object.defineProperty(ia,"__esModule",{value:!0});const Yr=oe,Hu=de,Bu={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Yr._)`{passingSchemas: ${e.passing}}`},Ju={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Bu,code(e){const{gen:t,schema:r,parentSchema:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&n.discriminator)return;const s=r,u=t.let("valid",!1),d=t.let("passing",null),f=t.name("_valid");e.setParams({passing:d}),t.block(p),e.result(u,()=>e.reset(),()=>e.error(!0));function p(){s.forEach((c,m)=>{let j;(0,Hu.alwaysValidSchema)(a,c)?t.var(f,!0):j=e.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},f),m>0&&t.if((0,Yr._)`${f} && ${u}`).assign(u,!1).assign(d,(0,Yr._)`[${d}, ${m}]`).else(),t.if(f,()=>{t.assign(u,!0),t.assign(d,m),j&&e.mergeEvaluated(j,Yr.Name)})})}}};ia.default=Ju;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});const Gu=de,Yu={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=t.name("valid");r.forEach((s,u)=>{if((0,Gu.alwaysValidSchema)(n,s))return;const d=e.subschema({keyword:"allOf",schemaProp:u},a);e.ok(a),e.mergeEvaluated(d)})}};oa.default=Yu;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});const nn=oe,vs=de,xu={message:({params:e})=>(0,nn.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,nn._)`{failingKeyword: ${e.ifClause}}`},Wu={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:xu,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,vs.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const a=Aa(n,"then"),s=Aa(n,"else");if(!a&&!s)return;const u=t.let("valid",!0),d=t.name("_valid");if(f(),e.reset(),a&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(d,p("then",c),p("else",c))}else a?t.if(d,p("then")):t.if((0,nn.not)(d),p("else"));e.pass(u,()=>e.error(!0));function f(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(c)}function p(c,m){return()=>{const j=e.subschema({keyword:c},d);t.assign(u,d),e.mergeValidEvaluated(j,u),m?t.assign(m,(0,nn._)`${c}`):e.setParams({ifClause:c})}}}};function Aa(e,t){const r=e.schema[t];return r!==void 0&&!(0,vs.alwaysValidSchema)(e,r)}ua.default=Wu;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});const Qu=de,Xu={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Qu.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};ca.default=Xu;Object.defineProperty(Qn,"__esModule",{value:!0});const Zu=nr,ec=Xn,tc=ar,rc=Zn,nc=ea,ac=ps,sc=ta,ic=fn,oc=ra,uc=na,cc=aa,lc=sa,fc=ia,dc=oa,hc=ua,pc=ca;function mc(e=!1){const t=[cc.default,lc.default,fc.default,dc.default,hc.default,pc.default,sc.default,ic.default,ac.default,oc.default,uc.default];return e?t.push(ec.default,rc.default):t.push(Zu.default,tc.default),t.push(nc.default),t}Qn.default=mc;var la={},fa={};Object.defineProperty(fa,"__esModule",{value:!0});const ke=oe,vc={message:({schemaCode:e})=>(0,ke.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ke._)`{format: ${e}}`},yc={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:vc,code(e,t){const{gen:r,data:n,$data:a,schema:s,schemaCode:u,it:d}=e,{opts:f,errSchemaPath:p,schemaEnv:c,self:m}=d;if(!f.validateFormats)return;a?j():v();function j(){const _=r.scopeValue("formats",{ref:m.formats,code:f.code.formats}),O=r.const("fDef",(0,ke._)`${_}[${u}]`),E=r.let("fType"),$=r.let("format");r.if((0,ke._)`typeof ${O} == "object" && !(${O} instanceof RegExp)`,()=>r.assign(E,(0,ke._)`${O}.type || "string"`).assign($,(0,ke._)`${O}.validate`),()=>r.assign(E,(0,ke._)`"string"`).assign($,O)),e.fail$data((0,ke.or)(I(),T()));function I(){return f.strictSchema===!1?ke.nil:(0,ke._)`${u} && !${$}`}function T(){const F=c.$async?(0,ke._)`(${O}.async ? await ${$}(${n}) : ${$}(${n}))`:(0,ke._)`${$}(${n})`,z=(0,ke._)`(typeof ${$} == "function" ? ${F} : ${$}.test(${n}))`;return(0,ke._)`${$} && ${$} !== true && ${E} === ${t} && !${z}`}}function v(){const _=m.formats[s];if(!_){I();return}if(_===!0)return;const[O,E,$]=T(_);O===t&&e.pass(F());function I(){if(f.strictSchema===!1){m.logger.warn(z());return}throw new Error(z());function z(){return`unknown format "${s}" ignored in schema at path "${p}"`}}function T(z){const S=z instanceof RegExp?(0,ke.regexpCode)(z):f.code.formats?(0,ke._)`${f.code.formats}${(0,ke.getProperty)(s)}`:void 0,N=r.scopeValue("formats",{key:s,ref:z,code:S});return typeof z=="object"&&!(z instanceof RegExp)?[z.type||"string",z.validate,(0,ke._)`${N}.validate`]:["string",z,N]}function F(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ke._)`await ${$}(${n})`}return typeof E=="function"?(0,ke._)`${$}(${n})`:(0,ke._)`${$}.test(${n})`}}}};fa.default=yc;Object.defineProperty(la,"__esModule",{value:!0});const _c=fa,gc=[_c.default];la.default=gc;var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.contentVocabulary=rr.metadataVocabulary=void 0;rr.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];rr.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Fn,"__esModule",{value:!0});const $c=Mn,bc=Un,wc=Qn,Ec=la,Fa=rr,Sc=[$c.default,bc.default,(0,wc.default)(),Ec.default,Fa.metadataVocabulary,Fa.contentVocabulary];Fn.default=Sc;var da={},ys={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(ys);Object.defineProperty(da,"__esModule",{value:!0});const Xt=oe,Sn=ys,Ma=Le,Pc=de,Oc={message:({params:{discrError:e,tagName:t}})=>e===Sn.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Xt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},kc={keyword:"discriminator",type:"object",schemaType:"object",error:Oc,code(e){const{gen:t,data:r,schema:n,parentSchema:a,it:s}=e,{oneOf:u}=a;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const d=n.propertyName;if(typeof d!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const f=t.let("valid",!1),p=t.const("tag",(0,Xt._)`${r}${(0,Xt.getProperty)(d)}`);t.if((0,Xt._)`typeof ${p} == "string"`,()=>c(),()=>e.error(!1,{discrError:Sn.DiscrError.Tag,tag:p,tagName:d})),e.ok(f);function c(){const v=j();t.if(!1);for(const _ in v)t.elseIf((0,Xt._)`${p} === ${_}`),t.assign(f,m(v[_]));t.else(),e.error(!1,{discrError:Sn.DiscrError.Mapping,tag:p,tagName:d}),t.endIf()}function m(v){const _=t.name("valid"),O=e.subschema({keyword:"oneOf",schemaProp:v},_);return e.mergeEvaluated(O,Xt.Name),_}function j(){var v;const _={},O=$(a);let E=!0;for(let F=0;F<u.length;F++){let z=u[F];z!=null&&z.$ref&&!(0,Pc.schemaHasRulesButRef)(z,s.self.RULES)&&(z=Ma.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,z==null?void 0:z.$ref),z instanceof Ma.SchemaEnv&&(z=z.schema));const S=(v=z==null?void 0:z.properties)===null||v===void 0?void 0:v[d];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${d}"`);E=E&&(O||$(z)),I(S,F)}if(!E)throw new Error(`discriminator: "${d}" must be required`);return _;function $({required:F}){return Array.isArray(F)&&F.includes(d)}function I(F,z){if(F.const)T(F.const,z);else if(F.enum)for(const S of F.enum)T(S,z);else throw new Error(`discriminator: "properties/${d}" must have "const" or "enum"`)}function T(F,z){if(typeof F!="string"||F in _)throw new Error(`discriminator: "${d}" values must be unique strings`);_[F]=z}}}};da.default=kc;const Tc="http://json-schema.org/draft-07/schema#",Nc="http://json-schema.org/draft-07/schema#",jc="Core schema meta-schema",Rc={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Cc=["object","boolean"],Ic={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Dc={$schema:Tc,$id:Nc,title:jc,definitions:Rc,type:Cc,properties:Ic,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=Ua,n=Fn,a=da,s=Dc,u=["/properties"],d="http://json-schema.org/draft-07/schema";class f extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(s,u):s;this.addMetaSchema(_,d,!1),this.refs["http://json-schema.org/schema"]=d}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(d)?d:void 0)}}e.exports=t=f,Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var p=rt;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return p.KeywordCxt}});var c=oe;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var m=Tr;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return m.default}});var j=Nr;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return j.default}})})(Hs,Qr);const Ac=Rs(Qr);var Fc=function(t){if(t&&t.length)for(const a of t){let s;switch(a.keyword){case"additionalItems":case"items":s="";var n=a.params.limit;s+="must NOT have more than "+n+" item",n!=1&&(s+="s");break;case"additionalProperties":s="must NOT have additional properties";break;case"anyOf":s='must match a schema in "anyOf"';break;case"const":s="must be equal to constant";break;case"contains":s="must contain a valid item";break;case"dependencies":case"dependentRequired":s="";var n=a.params.depsCount;s+="must have propert",n==1?s+="y":s+="ies",s+=" "+a.params.deps+" when property "+a.params.property+" is present";break;case"discriminator":switch(a.params.error){case"tag":s='tag "'+a.params.tag+'" must be string';break;case"mapping":s='value of tag "'+a.params.tag+'" must be in oneOf';break;default:s='must pass "'+a.keyword+'" keyword validation'}break;case"enum":s="must be equal to one of the allowed values";break;case"false schema":s="boolean schema is false";break;case"format":s='must match format "'+a.params.format+'"';break;case"formatMaximum":case"formatExclusiveMaximum":s="";var r=a.params.comparison+" "+a.params.limit;s+="must be "+r;break;case"formatMinimum":case"formatExclusiveMinimum":s="";var r=a.params.comparison+" "+a.params.limit;s+="must be "+r;break;case"if":s='must match "'+a.params.failingKeyword+'" schema';break;case"maximum":case"exclusiveMaximum":s="";var r=a.params.comparison+" "+a.params.limit;s+="must be "+r;break;case"maxItems":s="";var n=a.params.limit;s+="must NOT have more than "+n+" item",n!=1&&(s+="s");break;case"maxLength":s="";var n=a.params.limit;s+="must NOT be longer than "+n+" character",n!=1&&(s+="s");break;case"maxProperties":s="";var n=a.params.limit;s+="must NOT have more than "+n+" propert",n==1?s+="y":s+="ies";break;case"minimum":case"exclusiveMinimum":s="";var r=a.params.comparison+" "+a.params.limit;s+="must be "+r;break;case"minItems":s="";var n=a.params.limit;s+="must NOT have less than "+n+" item",n!=1&&(s+="s");break;case"minLength":s="";var n=a.params.limit;s+="must NOT be shorter than "+n+" character",n!=1&&(s+="s");break;case"minProperties":s="";var n=a.params.limit;s+="must NOT have less than "+n+" propert",n==1?s+="y":s+="ies";break;case"multipleOf":s="must be a multiple of "+a.params.multipleOf;break;case"not":s='must NOT be valid according to schema in "not"';break;case"oneOf":s='must match exactly one schema in "oneOf"';break;case"pattern":s='must match pattern "'+a.params.pattern+'"';break;case"patternRequired":s='must have property matching pattern "'+a.params.missingPattern+'"';break;case"propertyNames":s="property name is invalid";break;case"required":s="must have required property "+a.params.missingProperty;break;case"type":s="must be "+a.params.type;break;case"unevaluatedItems":s="";var n=a.params.len;s+="must NOT have more than "+n+" item",n!=1&&(s+="s");break;case"unevaluatedProperties":s="must NOT have unevaluated properties";break;case"uniqueItems":s="must NOT have duplicate items (items ## "+a.params.j+" and "+a.params.i+" are identical)";break;default:s='must pass "'+a.keyword+'" keyword validation'}a.message=s}},Mc=function(t){if(t&&t.length)for(const a of t){let s;switch(a.keyword){case"additionalItems":case"items":s="";var n=a.params.limit;s+=""+n+"";break;case"additionalProperties":s="";break;case"anyOf":s=" anyOf ";break;case"const":s="";break;case"contains":s="";break;case"dependencies":case"dependentRequired":s="";var n=a.params.depsCount;s+=""+a.params.property+""+a.params.deps;break;case"discriminator":switch(a.params.error){case"tag":s=' "'+a.params.tag+'" ';break;case"mapping":s=' "'+a.params.tag+'"  oneOf ';break;default:s=' "'+a.keyword+' "'}break;case"enum":s="";break;case"false schema":s="";break;case"format":s=' "'+a.params.format+'"';break;case"formatMaximum":case"formatExclusiveMaximum":s="";var r=a.params.comparison+" "+a.params.limit;s+=" "+r;break;case"formatMinimum":case"formatExclusiveMinimum":s="";var r=a.params.comparison+" "+a.params.limit;s+=" "+r;break;case"if":s=' "'+a.params.failingKeyword+'" ';break;case"maximum":case"exclusiveMaximum":s="";var r=a.params.comparison+" "+a.params.limit;s+=" "+r;break;case"maxItems":s="";var n=a.params.limit;s+=" "+n+" ";break;case"maxLength":s="";var n=a.params.limit;s+=" "+n+" ";break;case"maxProperties":s="";var n=a.params.limit;s+=" "+n+" ";break;case"minimum":case"exclusiveMinimum":s="";var r=a.params.comparison+" "+a.params.limit;s+=" "+r;break;case"minItems":s="";var n=a.params.limit;s+=" "+n+" ";break;case"minLength":s="";var n=a.params.limit;s+=" "+n+" ";break;case"minProperties":s="";var n=a.params.limit;s+=" "+n+" ";break;case"multipleOf":s=" "+a.params.multipleOf+" ";break;case"not":s=' "not" schema';break;case"oneOf":s=' "oneOf"  schema';break;case"pattern":s=' "'+a.params.pattern+'"';break;case"patternRequired":s=" "+a.params.missingPattern;break;case"propertyNames":s=" ";break;case"required":s=" "+a.params.missingProperty;break;case"type":s=" "+a.params.type+" ";break;case"unevaluatedItems":s="";var n=a.params.len;s+="  "+n+" ";break;case"unevaluatedProperties":s="";break;case"uniqueItems":s=" ( "+a.params.j+"  "+a.params.i+" )";break;default:s=' "'+a.keyword+' "'}a.message=s}};const Vc=sn({__name:"Schema",props:{modelValue:{type:Object,default:()=>({exp:"",option:{}})},json:{type:Object,default:()=>Zt.empty()},height:{type:Number,default:0}},emits:["update:modelValue","success"],setup(e,{emit:t}){const r=e,n=xr({get:()=>r.modelValue,set:u=>t("update:modelValue",u)});let a=Ot("");const s=new Ac({allErrors:!0,messages:!1});return wr(()=>({json:r.json,current:n.value}),async({json:u,current:d})=>{if(u.isError()){a.value=u.error();return}if(u.isEmpty()||d.exp.trim()===""){a.value="";return}try{const f=s.compile(dr.parse(d.exp));f(u==null?void 0:u.content())?a.value="ok ^o^":(($t("main_locale")==="zh_CN"?Mc:Fc)(f.errors),a.value=s.errorsText(f.errors,{separator:`
`})),t("success")}catch(f){a.value=$error(f)}},{immediate:!0,deep:!0}),(u,d)=>{const f=_e("Editor"),p=_e("HelpTip"),c=_e("Align"),m=_e("HeightResize");return we(),ze(m,{"father-height":e.height,ignore:"",reduce:5},{default:Ee(({small:j,large:v})=>[fe(c,{direction:"horizontal",width:"100%"},{default:Ee(()=>[fe(f,{modelValue:n.value.exp,"onUpdate:modelValue":d[0]||(d[0]=_=>n.value.exp=_),"disable-line-numbers":"",placeholder:`JSON schema ${u.$t("main_ui_input")}`,lang:"json",height:j},null,8,["modelValue","placeholder","height"]),fe(f,{"model-value":a.value,"disable-line-numbers":"",placeholder:`JSON schema validator ${u.$t("main_ui_output")}`,height:v},{default:Ee(()=>[fe(p,{link:"https://github.com/ajv-validator/ajv"})]),_:2},1032,["model-value","placeholder","height"])]),_:2},1024)]),_:1},8,["father-height"])}}});function ft(e){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(e)}function _s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Va(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gs(e,t,r){return t&&Va(e.prototype,t),r&&Va(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pr(e,t)}function Sr(e){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sr(e)}function Pr(e,t){return Pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Pr(e,t)}function $s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $r(e,t,r){return $s()?$r=Reflect.construct.bind():$r=function(a,s,u){var d=[null];d.push.apply(d,s);var f=Function.bind.apply(a,d),p=new f;return u&&Pr(p,u.prototype),p},$r.apply(null,arguments)}function zc(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Pn(e){var t=typeof Map=="function"?new Map:void 0;return Pn=function(n){if(n===null||!zc(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,a)}function a(){return $r(n,arguments,Sr(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Pr(a,n)},Pn(e)}function Lc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kc(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lc(e)}function qc(e){var t=$s();return function(){var n=Sr(e),a;if(t){var s=Sr(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Kc(this,a)}}function Hc(e){return Bc(e)||Jc(e)||bs(e)||Gc()}function Bc(e){if(Array.isArray(e))return On(e)}function Jc(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bs(e,t){if(e){if(typeof e=="string")return On(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return On(e,t)}}function On(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yc(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=bs(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,u=!1,d;return{s:function(){r=r.call(e)},n:function(){var f=r.next();return s=f.done,f},e:function(f){u=!0,d=f},f:function(){try{!s&&r.return!=null&&r.return()}finally{if(u)throw d}}}}var Ue=Object.prototype.hasOwnProperty;function Mt(e,t){return e=e.slice(),e.push(t),e}function kn(e,t){return t=t.slice(),t.unshift(e),t}var xc=function(e){Uc(r,e);var t=qc(r);function r(n){var a;return _s(this,r),a=t.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),a.avoidNew=!0,a.value=n,a.name="NewError",a}return gs(r)}(Pn(Error));function he(e,t,r,n,a){if(!(this instanceof he))try{return new he(e,t,r,n,a)}catch(f){if(!f.avoidNew)throw f;return f.value}typeof e=="string"&&(a=n,n=r,r=t,t=e,e=null);var s=e&&ft(e)==="object";if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=Ue.call(e,"wrap")?e.wrap:!0,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||n||null,this.otherTypeCallback=e.otherTypeCallback||a||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},e.autostart!==!1){var u={path:s?e.path:t};s?"json"in e&&(u.json=e.json):u.json=r;var d=this.evaluate(u);if(!d||ft(d)!=="object")throw new xc(d);return d}}he.prototype.evaluate=function(e,t,r,n){var a=this,s=this.parent,u=this.parentProperty,d=this.flatten,f=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,t=t||this.json,e=e||this.path,e&&ft(e)==="object"&&!Array.isArray(e)){if(!e.path&&e.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Ue.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var p=e;t=p.json,d=Ue.call(e,"flatten")?e.flatten:d,this.currResultType=Ue.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Ue.call(e,"sandbox")?e.sandbox:this.currSandbox,f=Ue.call(e,"wrap")?e.wrap:f,this.currPreventEval=Ue.call(e,"preventEval")?e.preventEval:this.currPreventEval,r=Ue.call(e,"callback")?e.callback:r,this.currOtherTypeCallback=Ue.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,s=Ue.call(e,"parent")?e.parent:s,u=Ue.call(e,"parentProperty")?e.parentProperty:u,e=e.path}if(s=s||null,u=u||null,Array.isArray(e)&&(e=he.toPathString(e)),!(!e&&e!==""||!t)){var c=he.toPathArray(e);c[0]==="$"&&c.length>1&&c.shift(),this._hasParentSelector=null;var m=this._trace(c,t,["$"],s,u,r).filter(function(j){return j&&!j.isParentSelector});return m.length?!f&&m.length===1&&!m[0].hasArrExpr?this._getPreferredOutput(m[0]):m.reduce(function(j,v){var _=a._getPreferredOutput(v);return d&&Array.isArray(_)?j=j.concat(_):j.push(_),j},[]):f?[]:void 0}};he.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":{var r=Array.isArray(e.path)?e.path:he.toPathArray(e.path);return e.pointer=he.toPointer(r),e.path=typeof e.path=="string"?e.path:he.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return he.toPathString(e[t]);case"pointer":return he.toPointer(e.path);default:throw new TypeError("Unknown result type")}};he.prototype._handleCallback=function(e,t,r){if(t){var n=this._getPreferredOutput(e);e.path=typeof e.path=="string"?e.path:he.toPathString(e.path),t(n,r,e)}};he.prototype._trace=function(e,t,r,n,a,s,u,d){var f=this,p;if(!e.length)return p={path:r,value:t,parent:n,parentProperty:a,hasArrExpr:u},this._handleCallback(p,s,"value"),p;var c=e[0],m=e.slice(1),j=[];function v(J){Array.isArray(J)?J.forEach(function(Z){j.push(Z)}):j.push(J)}if((typeof c!="string"||d)&&t&&Ue.call(t,c))v(this._trace(m,t[c],Mt(r,c),t,c,s,u));else if(c==="*")this._walk(t,function(J){v(f._trace(m,t[J],Mt(r,J),t,J,s,!0,!0))});else if(c==="..")v(this._trace(m,t,r,n,a,s,u)),this._walk(t,function(J){ft(t[J])==="object"&&v(f._trace(e.slice(),t[J],Mt(r,J),t,J,s,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:m,isParentSelector:!0};if(c==="~")return p={path:Mt(r,c),value:a,parent:n,parentProperty:null},this._handleCallback(p,s,"property"),p;if(c==="$")v(this._trace(m,t,r,null,null,s,u));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(c))v(this._slice(c,m,t,r,n,a,s));else if(c.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var _=c.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(t,function(J){f._eval(_,t[J],J,r,n,a)&&v(f._trace(m,t[J],Mt(r,J),t,J,s,!0))})}else if(c[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");v(this._trace(kn(this._eval(c,t,r[r.length-1],r.slice(0,-1),n,a),m),t,r,n,a,s,u))}else if(c[0]==="@"){var O=!1,E=c.slice(1,-2);switch(E){case"scalar":(!t||!["object","function"].includes(ft(t)))&&(O=!0);break;case"boolean":case"string":case"undefined":case"function":ft(t)===E&&(O=!0);break;case"integer":Number.isFinite(t)&&!(t%1)&&(O=!0);break;case"number":Number.isFinite(t)&&(O=!0);break;case"nonFinite":typeof t=="number"&&!Number.isFinite(t)&&(O=!0);break;case"object":t&&ft(t)===E&&(O=!0);break;case"array":Array.isArray(t)&&(O=!0);break;case"other":O=this.currOtherTypeCallback(t,r,n,a);break;case"null":t===null&&(O=!0);break;default:throw new TypeError("Unknown value type "+E)}if(O)return p={path:r,value:t,parent:n,parentProperty:a},this._handleCallback(p,s,"value"),p}else if(c[0]==="`"&&t&&Ue.call(t,c.slice(1))){var $=c.slice(1);v(this._trace(m,t[$],Mt(r,$),t,$,s,u,!0))}else if(c.includes(",")){var I=c.split(","),T=Yc(I),F;try{for(T.s();!(F=T.n()).done;){var z=F.value;v(this._trace(kn(z,m),t,r,n,a,s,!0))}}catch(J){T.e(J)}finally{T.f()}}else!d&&t&&Ue.call(t,c)&&v(this._trace(m,t[c],Mt(r,c),t,c,s,u,!0))}if(this._hasParentSelector)for(var S=0;S<j.length;S++){var N=j[S];if(N&&N.isParentSelector){var V=this._trace(N.expr,t,N.path,n,a,s,u);if(Array.isArray(V)){j[S]=V[0];for(var x=V.length,L=1;L<x;L++)S++,j.splice(S,0,V[L])}else j[S]=V}}return j};he.prototype._walk=function(e,t){if(Array.isArray(e))for(var r=e.length,n=0;n<r;n++)t(n);else e&&ft(e)==="object"&&Object.keys(e).forEach(function(a){t(a)})};he.prototype._slice=function(e,t,r,n,a,s,u){if(Array.isArray(r)){var d=r.length,f=e.split(":"),p=f[2]&&Number.parseInt(f[2])||1,c=f[0]&&Number.parseInt(f[0])||0,m=f[1]&&Number.parseInt(f[1])||d;c=c<0?Math.max(0,c+d):Math.min(d,c),m=m<0?Math.max(0,m+d):Math.min(d,m);for(var j=[],v=c;v<m;v+=p){var _=this._trace(kn(v,t),r,n,a,s,u,!0);_.forEach(function(O){j.push(O)})}return j}};he.prototype._eval=function(e,t,r,n,a,s){this.currSandbox._$_parentProperty=s,this.currSandbox._$_parent=a,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=t;var u=e.includes("@path");u&&(this.currSandbox._$_path=he.toPathString(n.concat([r])));var d="script:"+e;if(!he.cache[d]){var f=e.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");u&&(f=f.replace(/@path/g,"_$_path")),he.cache[d]=new this.vm.Script(f)}try{return he.cache[d].runInNewContext(this.currSandbox)}catch(p){throw new Error("jsonPath: "+p.message+": "+e)}};he.cache={};he.toPathString=function(e){for(var t=e,r=t.length,n="$",a=1;a<r;a++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[a])||(n+=/^[\*0-9]+$/.test(t[a])?"["+t[a]+"]":"['"+t[a]+"']");return n};he.toPointer=function(e){for(var t=e,r=t.length,n="",a=1;a<r;a++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[a])||(n+="/"+t[a].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return n};he.toPathArray=function(e){var t=he.cache;if(t[e])return t[e].concat();var r=[],n=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(s,u){return"[#"+(r.push(u)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(s,u){return"['"+u.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(s,u){return";"+u.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),a=n.split(";").map(function(s){var u=s.match(/#([0-9]+)/);return!u||!u[1]?s:r[u[1]]});return t[e]=a,t[e].concat()};var Wc=function(t,r,n){for(var a=t.length,s=0;s<a;s++){var u=t[s];n(u)&&r.push(t.splice(s--,1)[0])}},Qc=function(){function e(t){_s(this,e),this.code=t}return gs(e,[{key:"runInNewContext",value:function(r){var n=this.code,a=Object.keys(r),s=[];Wc(a,s,function(c){return typeof r[c]=="function"});var u=a.map(function(c,m){return r[c]}),d=s.reduce(function(c,m){var j=r[m].toString();return/function/.test(j)||(j="function "+j),"var "+m+"="+j+";"+c},"");n=d+n,!/(["'])use strict\1/.test(n)&&!a.includes("arguments")&&(n="var arguments = undefined;"+n),n=n.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var f=n.lastIndexOf(";"),p=f>-1?n.slice(0,f+1)+" return "+n.slice(f+1):" return "+n;return $r(Function,a.concat([p])).apply(void 0,Hc(u))}}]),e}();he.prototype.vm={Script:Qc};var ws={};(function(e){(function(t){function r(i){return i!==null?Object.prototype.toString.call(i)==="[object Array]":!1}function n(i){return i!==null?Object.prototype.toString.call(i)==="[object Object]":!1}function a(i,h){if(i===h)return!0;var w=Object.prototype.toString.call(i);if(w!==Object.prototype.toString.call(h))return!1;if(r(i)===!0){if(i.length!==h.length)return!1;for(var R=0;R<i.length;R++)if(a(i[R],h[R])===!1)return!1;return!0}if(n(i)===!0){var M={};for(var B in i)if(hasOwnProperty.call(i,B)){if(a(i[B],h[B])===!1)return!1;M[B]=!0}for(var re in h)if(hasOwnProperty.call(h,re)&&M[re]!==!0)return!1;return!0}return!1}function s(i){if(i===""||i===!1||i===null)return!0;if(r(i)&&i.length===0)return!0;if(n(i)){for(var h in i)if(i.hasOwnProperty(h))return!1;return!0}else return!1}function u(i){for(var h=Object.keys(i),w=[],R=0;R<h.length;R++)w.push(i[h[R]]);return w}var d;typeof String.prototype.trimLeft=="function"?d=function(i){return i.trimLeft()}:d=function(i){return i.match(/^\s*(.*)/)[1]};var f=0,p=1,c=2,m=3,j=4,v=5,_=6,O=7,E=8,$=9,I={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},T="EOF",F="UnquotedIdentifier",z="QuotedIdentifier",S="Rbracket",N="Rparen",V="Comma",x="Colon",L="Rbrace",J="Number",Z="Current",Ne="Expref",pe="Pipe",Je="Or",Ge="And",Ye="EQ",nt="GT",xe="LT",K="GTE",P="LTE",U="NE",k="Flatten",o="Star",g="Filter",A="Dot",q="Not",H="Lbrace",te="Lbracket",ae="Lparen",me="Literal",Ke={".":A,"*":o,",":V,":":x,"{":H,"}":L,"]":S,"(":ae,")":N,"@":Z},yt={"<":!0,">":!0,"=":!0,"!":!0},Nt={" ":!0,"	":!0,"\n":!0};function jt(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"||i==="_"}function De(i){return i>="0"&&i<="9"||i==="-"}function Rt(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"||i>="0"&&i<="9"||i==="_"}function at(){}at.prototype={tokenize:function(i){var h=[];this._current=0;for(var w,R,M;this._current<i.length;)if(jt(i[this._current]))w=this._current,R=this._consumeUnquotedIdentifier(i),h.push({type:F,value:R,start:w});else if(Ke[i[this._current]]!==void 0)h.push({type:Ke[i[this._current]],value:i[this._current],start:this._current}),this._current++;else if(De(i[this._current]))M=this._consumeNumber(i),h.push(M);else if(i[this._current]==="[")M=this._consumeLBracket(i),h.push(M);else if(i[this._current]==='"')w=this._current,R=this._consumeQuotedIdentifier(i),h.push({type:z,value:R,start:w});else if(i[this._current]==="'")w=this._current,R=this._consumeRawStringLiteral(i),h.push({type:me,value:R,start:w});else if(i[this._current]==="`"){w=this._current;var B=this._consumeLiteral(i);h.push({type:me,value:B,start:w})}else if(yt[i[this._current]]!==void 0)h.push(this._consumeOperator(i));else if(Nt[i[this._current]]!==void 0)this._current++;else if(i[this._current]==="&")w=this._current,this._current++,i[this._current]==="&"?(this._current++,h.push({type:Ge,value:"&&",start:w})):h.push({type:Ne,value:"&",start:w});else if(i[this._current]==="|")w=this._current,this._current++,i[this._current]==="|"?(this._current++,h.push({type:Je,value:"||",start:w})):h.push({type:pe,value:"|",start:w});else{var re=new Error("Unknown character:"+i[this._current]);throw re.name="LexerError",re}return h},_consumeUnquotedIdentifier:function(i){var h=this._current;for(this._current++;this._current<i.length&&Rt(i[this._current]);)this._current++;return i.slice(h,this._current)},_consumeQuotedIdentifier:function(i){var h=this._current;this._current++;for(var w=i.length;i[this._current]!=='"'&&this._current<w;){var R=this._current;i[R]==="\\"&&(i[R+1]==="\\"||i[R+1]==='"')?R+=2:R++,this._current=R}return this._current++,JSON.parse(i.slice(h,this._current))},_consumeRawStringLiteral:function(i){var h=this._current;this._current++;for(var w=i.length;i[this._current]!=="'"&&this._current<w;){var R=this._current;i[R]==="\\"&&(i[R+1]==="\\"||i[R+1]==="'")?R+=2:R++,this._current=R}this._current++;var M=i.slice(h+1,this._current-1);return M.replace("\\'","'")},_consumeNumber:function(i){var h=this._current;this._current++;for(var w=i.length;De(i[this._current])&&this._current<w;)this._current++;var R=parseInt(i.slice(h,this._current));return{type:J,value:R,start:h}},_consumeLBracket:function(i){var h=this._current;return this._current++,i[this._current]==="?"?(this._current++,{type:g,value:"[?",start:h}):i[this._current]==="]"?(this._current++,{type:k,value:"[]",start:h}):{type:te,value:"[",start:h}},_consumeOperator:function(i){var h=this._current,w=i[h];if(this._current++,w==="!")return i[this._current]==="="?(this._current++,{type:U,value:"!=",start:h}):{type:q,value:"!",start:h};if(w==="<")return i[this._current]==="="?(this._current++,{type:P,value:"<=",start:h}):{type:xe,value:"<",start:h};if(w===">")return i[this._current]==="="?(this._current++,{type:K,value:">=",start:h}):{type:nt,value:">",start:h};if(w==="="&&i[this._current]==="=")return this._current++,{type:Ye,value:"==",start:h}},_consumeLiteral:function(i){this._current++;for(var h=this._current,w=i.length,R;i[this._current]!=="`"&&this._current<w;){var M=this._current;i[M]==="\\"&&(i[M+1]==="\\"||i[M+1]==="`")?M+=2:M++,this._current=M}var B=d(i.slice(h,this._current));return B=B.replace("\\`","`"),this._looksLikeJSON(B)?R=JSON.parse(B):R=JSON.parse('"'+B+'"'),this._current++,R},_looksLikeJSON:function(i){var h='[{"',w=["true","false","null"],R="-0123456789";if(i==="")return!1;if(h.indexOf(i[0])>=0)return!0;if(w.indexOf(i)>=0)return!0;if(R.indexOf(i[0])>=0)try{return JSON.parse(i),!0}catch{return!1}else return!1}};var X={};X[T]=0,X[F]=0,X[z]=0,X[S]=0,X[N]=0,X[V]=0,X[L]=0,X[J]=0,X[Z]=0,X[Ne]=0,X[pe]=1,X[Je]=2,X[Ge]=3,X[Ye]=5,X[nt]=5,X[xe]=5,X[K]=5,X[P]=5,X[U]=5,X[k]=9,X[o]=20,X[g]=21,X[A]=40,X[q]=45,X[H]=50,X[te]=55,X[ae]=60;function st(){}st.prototype={parse:function(i){this._loadTokens(i),this.index=0;var h=this.expression(0);if(this._lookahead(0)!==T){var w=this._lookaheadToken(0),R=new Error("Unexpected token type: "+w.type+", value: "+w.value);throw R.name="ParserError",R}return h},_loadTokens:function(i){var h=new at,w=h.tokenize(i);w.push({type:T,value:"",start:i.length}),this.tokens=w},expression:function(i){var h=this._lookaheadToken(0);this._advance();for(var w=this.nud(h),R=this._lookahead(0);i<X[R];)this._advance(),w=this.led(R,w),R=this._lookahead(0);return w},_lookahead:function(i){return this.tokens[this.index+i].type},_lookaheadToken:function(i){return this.tokens[this.index+i]},_advance:function(){this.index++},nud:function(i){var h,w,R;switch(i.type){case me:return{type:"Literal",value:i.value};case F:return{type:"Field",name:i.value};case z:var M={type:"Field",name:i.value};if(this._lookahead(0)===ae)throw new Error("Quoted identifier not allowed for function names.");return M;case q:return w=this.expression(X.Not),{type:"NotExpression",children:[w]};case o:return h={type:"Identity"},w=null,this._lookahead(0)===S?w={type:"Identity"}:w=this._parseProjectionRHS(X.Star),{type:"ValueProjection",children:[h,w]};case g:return this.led(i.type,{type:"Identity"});case H:return this._parseMultiselectHash();case k:return h={type:k,children:[{type:"Identity"}]},w=this._parseProjectionRHS(X.Flatten),{type:"Projection",children:[h,w]};case te:return this._lookahead(0)===J||this._lookahead(0)===x?(w=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},w)):this._lookahead(0)===o&&this._lookahead(1)===S?(this._advance(),this._advance(),w=this._parseProjectionRHS(X.Star),{type:"Projection",children:[{type:"Identity"},w]}):this._parseMultiselectList();case Z:return{type:Z};case Ne:return R=this.expression(X.Expref),{type:"ExpressionReference",children:[R]};case ae:for(var B=[];this._lookahead(0)!==N;)this._lookahead(0)===Z?(R={type:Z},this._advance()):R=this.expression(0),B.push(R);return this._match(N),B[0];default:this._errorToken(i)}},led:function(i,h){var w;switch(i){case A:var R=X.Dot;return this._lookahead(0)!==o?(w=this._parseDotRHS(R),{type:"Subexpression",children:[h,w]}):(this._advance(),w=this._parseProjectionRHS(R),{type:"ValueProjection",children:[h,w]});case pe:return w=this.expression(X.Pipe),{type:pe,children:[h,w]};case Je:return w=this.expression(X.Or),{type:"OrExpression",children:[h,w]};case Ge:return w=this.expression(X.And),{type:"AndExpression",children:[h,w]};case ae:for(var M=h.name,B=[],re,se;this._lookahead(0)!==N;)this._lookahead(0)===Z?(re={type:Z},this._advance()):re=this.expression(0),this._lookahead(0)===V&&this._match(V),B.push(re);return this._match(N),se={type:"Function",name:M,children:B},se;case g:var je=this.expression(0);return this._match(S),this._lookahead(0)===k?w={type:"Identity"}:w=this._parseProjectionRHS(X.Filter),{type:"FilterProjection",children:[h,w,je]};case k:var We={type:k,children:[h]},Se=this._parseProjectionRHS(X.Flatten);return{type:"Projection",children:[We,Se]};case Ye:case U:case nt:case K:case xe:case P:return this._parseComparator(h,i);case te:var G=this._lookaheadToken(0);return G.type===J||G.type===x?(w=this._parseIndexExpression(),this._projectIfSlice(h,w)):(this._match(o),this._match(S),w=this._parseProjectionRHS(X.Star),{type:"Projection",children:[h,w]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(i){if(this._lookahead(0)===i)this._advance();else{var h=this._lookaheadToken(0),w=new Error("Expected "+i+", got: "+h.type);throw w.name="ParserError",w}},_errorToken:function(i){var h=new Error("Invalid token ("+i.type+'): "'+i.value+'"');throw h.name="ParserError",h},_parseIndexExpression:function(){if(this._lookahead(0)===x||this._lookahead(1)===x)return this._parseSliceExpression();var i={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(S),i},_projectIfSlice:function(i,h){var w={type:"IndexExpression",children:[i,h]};return h.type==="Slice"?{type:"Projection",children:[w,this._parseProjectionRHS(X.Star)]}:w},_parseSliceExpression:function(){for(var i=[null,null,null],h=0,w=this._lookahead(0);w!==S&&h<3;){if(w===x)h++,this._advance();else if(w===J)i[h]=this._lookaheadToken(0).value,this._advance();else{var R=this._lookahead(0),M=new Error("Syntax error, unexpected token: "+R.value+"("+R.type+")");throw M.name="Parsererror",M}w=this._lookahead(0)}return this._match(S),{type:"Slice",children:i}},_parseComparator:function(i,h){var w=this.expression(X[h]);return{type:"Comparator",name:h,children:[i,w]}},_parseDotRHS:function(i){var h=this._lookahead(0),w=[F,z,o];if(w.indexOf(h)>=0)return this.expression(i);if(h===te)return this._match(te),this._parseMultiselectList();if(h===H)return this._match(H),this._parseMultiselectHash()},_parseProjectionRHS:function(i){var h;if(X[this._lookahead(0)]<10)h={type:"Identity"};else if(this._lookahead(0)===te)h=this.expression(i);else if(this._lookahead(0)===g)h=this.expression(i);else if(this._lookahead(0)===A)this._match(A),h=this._parseDotRHS(i);else{var w=this._lookaheadToken(0),R=new Error("Sytanx error, unexpected token: "+w.value+"("+w.type+")");throw R.name="ParserError",R}return h},_parseMultiselectList:function(){for(var i=[];this._lookahead(0)!==S;){var h=this.expression(0);if(i.push(h),this._lookahead(0)===V&&(this._match(V),this._lookahead(0)===S))throw new Error("Unexpected token Rbracket")}return this._match(S),{type:"MultiSelectList",children:i}},_parseMultiselectHash:function(){for(var i=[],h=[F,z],w,R,M,B;;){if(w=this._lookaheadToken(0),h.indexOf(w.type)<0)throw new Error("Expecting an identifier token, got: "+w.type);if(R=w.value,this._advance(),this._match(x),M=this.expression(0),B={type:"KeyValuePair",name:R,value:M},i.push(B),this._lookahead(0)===V)this._match(V);else if(this._lookahead(0)===L){this._match(L);break}}return{type:"MultiSelectHash",children:i}}};function _t(i){this.runtime=i}_t.prototype={search:function(i,h){return this.visit(i,h)},visit:function(i,h){var w,R,M,B,re,se,je,We,Se,G;switch(i.type){case"Field":return h!==null&&n(h)?(se=h[i.name],se===void 0?null:se):null;case"Subexpression":for(M=this.visit(i.children[0],h),G=1;G<i.children.length;G++)if(M=this.visit(i.children[1],M),M===null)return null;return M;case"IndexExpression":return je=this.visit(i.children[0],h),We=this.visit(i.children[1],je),We;case"Index":if(!r(h))return null;var Qe=i.value;return Qe<0&&(Qe=h.length+Qe),M=h[Qe],M===void 0&&(M=null),M;case"Slice":if(!r(h))return null;var dn=i.children.slice(0),sr=this.computeSliceParams(h.length,dn),Rr=sr[0],Cr=sr[1],ir=sr[2];if(M=[],ir>0)for(G=Rr;G<Cr;G+=ir)M.push(h[G]);else for(G=Rr;G>Cr;G+=ir)M.push(h[G]);return M;case"Projection":var Re=this.visit(i.children[0],h);if(!r(Re))return null;for(Se=[],G=0;G<Re.length;G++)R=this.visit(i.children[1],Re[G]),R!==null&&Se.push(R);return Se;case"ValueProjection":if(Re=this.visit(i.children[0],h),!n(Re))return null;Se=[];var Ir=u(Re);for(G=0;G<Ir.length;G++)R=this.visit(i.children[1],Ir[G]),R!==null&&Se.push(R);return Se;case"FilterProjection":if(Re=this.visit(i.children[0],h),!r(Re))return null;var qt=[],Dr=[];for(G=0;G<Re.length;G++)w=this.visit(i.children[2],Re[G]),s(w)||qt.push(Re[G]);for(var It=0;It<qt.length;It++)R=this.visit(i.children[1],qt[It]),R!==null&&Dr.push(R);return Dr;case"Comparator":switch(B=this.visit(i.children[0],h),re=this.visit(i.children[1],h),i.name){case Ye:M=a(B,re);break;case U:M=!a(B,re);break;case nt:M=B>re;break;case K:M=B>=re;break;case xe:M=B<re;break;case P:M=B<=re;break;default:throw new Error("Unknown comparator: "+i.name)}return M;case k:var Ht=this.visit(i.children[0],h);if(!r(Ht))return null;var Bt=[];for(G=0;G<Ht.length;G++)R=Ht[G],r(R)?Bt.push.apply(Bt,R):Bt.push(R);return Bt;case"Identity":return h;case"MultiSelectList":if(h===null)return null;for(Se=[],G=0;G<i.children.length;G++)Se.push(this.visit(i.children[G],h));return Se;case"MultiSelectHash":if(h===null)return null;Se={};var Jt;for(G=0;G<i.children.length;G++)Jt=i.children[G],Se[Jt.name]=this.visit(Jt.value,h);return Se;case"OrExpression":return w=this.visit(i.children[0],h),s(w)&&(w=this.visit(i.children[1],h)),w;case"AndExpression":return B=this.visit(i.children[0],h),s(B)===!0?B:this.visit(i.children[1],h);case"NotExpression":return B=this.visit(i.children[0],h),s(B);case"Literal":return i.value;case pe:return je=this.visit(i.children[0],h),this.visit(i.children[1],je);case Z:return h;case"Function":var Ar=[];for(G=0;G<i.children.length;G++)Ar.push(this.visit(i.children[G],h));return this.runtime.callFunction(i.name,Ar);case"ExpressionReference":var or=i.children[0];return or.jmespathType=Ne,or;default:throw new Error("Unknown node type: "+i.type)}},computeSliceParams:function(i,h){var w=h[0],R=h[1],M=h[2],B=[null,null,null];if(M===null)M=1;else if(M===0){var re=new Error("Invalid slice, step cannot be 0");throw re.name="RuntimeError",re}var se=M<0;return w===null?w=se?i-1:0:w=this.capSliceRange(i,w,M),R===null?R=se?-1:i:R=this.capSliceRange(i,R,M),B[0]=w,B[1]=R,B[2]=M,B},capSliceRange:function(i,h,w){return h<0?(h+=i,h<0&&(h=w<0?-1:0)):h>=i&&(h=w<0?i-1:i),h}};function qe(i){this._interpreter=i,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[f]}]},avg:{_func:this._functionAvg,_signature:[{types:[E]}]},ceil:{_func:this._functionCeil,_signature:[{types:[f]}]},contains:{_func:this._functionContains,_signature:[{types:[c,m]},{types:[p]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[c]},{types:[c]}]},floor:{_func:this._functionFloor,_signature:[{types:[f]}]},length:{_func:this._functionLength,_signature:[{types:[c,m,j]}]},map:{_func:this._functionMap,_signature:[{types:[_]},{types:[m]}]},max:{_func:this._functionMax,_signature:[{types:[E,$]}]},merge:{_func:this._functionMerge,_signature:[{types:[j],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[m]},{types:[_]}]},sum:{_func:this._functionSum,_signature:[{types:[E]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[c]},{types:[c]}]},min:{_func:this._functionMin,_signature:[{types:[E,$]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[m]},{types:[_]}]},type:{_func:this._functionType,_signature:[{types:[p]}]},keys:{_func:this._functionKeys,_signature:[{types:[j]}]},values:{_func:this._functionValues,_signature:[{types:[j]}]},sort:{_func:this._functionSort,_signature:[{types:[$,E]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[m]},{types:[_]}]},join:{_func:this._functionJoin,_signature:[{types:[c]},{types:[$]}]},reverse:{_func:this._functionReverse,_signature:[{types:[c,m]}]},to_array:{_func:this._functionToArray,_signature:[{types:[p]}]},to_string:{_func:this._functionToString,_signature:[{types:[p]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[p]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[p],variadic:!0}]}}}qe.prototype={callFunction:function(i,h){var w=this.functionTable[i];if(w===void 0)throw new Error("Unknown function: "+i+"()");return this._validateArgs(i,h,w._signature),w._func.call(this,h)},_validateArgs:function(i,h,w){var R;if(w[w.length-1].variadic){if(h.length<w.length)throw R=w.length===1?" argument":" arguments",new Error("ArgumentError: "+i+"() takes at least"+w.length+R+" but received "+h.length)}else if(h.length!==w.length)throw R=w.length===1?" argument":" arguments",new Error("ArgumentError: "+i+"() takes "+w.length+R+" but received "+h.length);for(var M,B,re,se=0;se<w.length;se++){re=!1,M=w[se].types,B=this._getTypeName(h[se]);for(var je=0;je<M.length;je++)if(this._typeMatches(B,M[je],h[se])){re=!0;break}if(!re){var We=M.map(function(Se){return I[Se]}).join(",");throw new Error("TypeError: "+i+"() expected argument "+(se+1)+" to be type "+We+" but received type "+I[B]+" instead.")}}},_typeMatches:function(i,h,w){if(h===p)return!0;if(h===$||h===E||h===m){if(h===m)return i===m;if(i===m){var R;h===E?R=f:h===$&&(R=c);for(var M=0;M<w.length;M++)if(!this._typeMatches(this._getTypeName(w[M]),R,w[M]))return!1;return!0}}else return i===h},_getTypeName:function(i){switch(Object.prototype.toString.call(i)){case"[object String]":return c;case"[object Number]":return f;case"[object Array]":return m;case"[object Boolean]":return v;case"[object Null]":return O;case"[object Object]":return i.jmespathType===Ne?_:j}},_functionStartsWith:function(i){return i[0].lastIndexOf(i[1])===0},_functionEndsWith:function(i){var h=i[0],w=i[1];return h.indexOf(w,h.length-w.length)!==-1},_functionReverse:function(i){var h=this._getTypeName(i[0]);if(h===c){for(var w=i[0],R="",M=w.length-1;M>=0;M--)R+=w[M];return R}else{var B=i[0].slice(0);return B.reverse(),B}},_functionAbs:function(i){return Math.abs(i[0])},_functionCeil:function(i){return Math.ceil(i[0])},_functionAvg:function(i){for(var h=0,w=i[0],R=0;R<w.length;R++)h+=w[R];return h/w.length},_functionContains:function(i){return i[0].indexOf(i[1])>=0},_functionFloor:function(i){return Math.floor(i[0])},_functionLength:function(i){return n(i[0])?Object.keys(i[0]).length:i[0].length},_functionMap:function(i){for(var h=[],w=this._interpreter,R=i[0],M=i[1],B=0;B<M.length;B++)h.push(w.visit(R,M[B]));return h},_functionMerge:function(i){for(var h={},w=0;w<i.length;w++){var R=i[w];for(var M in R)h[M]=R[M]}return h},_functionMax:function(i){if(i[0].length>0){var h=this._getTypeName(i[0][0]);if(h===f)return Math.max.apply(Math,i[0]);for(var w=i[0],R=w[0],M=1;M<w.length;M++)R.localeCompare(w[M])<0&&(R=w[M]);return R}else return null},_functionMin:function(i){if(i[0].length>0){var h=this._getTypeName(i[0][0]);if(h===f)return Math.min.apply(Math,i[0]);for(var w=i[0],R=w[0],M=1;M<w.length;M++)w[M].localeCompare(R)<0&&(R=w[M]);return R}else return null},_functionSum:function(i){for(var h=0,w=i[0],R=0;R<w.length;R++)h+=w[R];return h},_functionType:function(i){switch(this._getTypeName(i[0])){case f:return"number";case c:return"string";case m:return"array";case j:return"object";case v:return"boolean";case _:return"expref";case O:return"null"}},_functionKeys:function(i){return Object.keys(i[0])},_functionValues:function(i){for(var h=i[0],w=Object.keys(h),R=[],M=0;M<w.length;M++)R.push(h[w[M]]);return R},_functionJoin:function(i){var h=i[0],w=i[1];return w.join(h)},_functionToArray:function(i){return this._getTypeName(i[0])===m?i[0]:[i[0]]},_functionToString:function(i){return this._getTypeName(i[0])===c?i[0]:JSON.stringify(i[0])},_functionToNumber:function(i){var h=this._getTypeName(i[0]),w;return h===f?i[0]:h===c&&(w=+i[0],!isNaN(w))?w:null},_functionNotNull:function(i){for(var h=0;h<i.length;h++)if(this._getTypeName(i[h])!==O)return i[h];return null},_functionSort:function(i){var h=i[0].slice(0);return h.sort(),h},_functionSortBy:function(i){var h=i[0].slice(0);if(h.length===0)return h;var w=this._interpreter,R=i[1],M=this._getTypeName(w.visit(R,h[0]));if([f,c].indexOf(M)<0)throw new Error("TypeError");for(var B=this,re=[],se=0;se<h.length;se++)re.push([se,h[se]]);re.sort(function(We,Se){var G=w.visit(R,We[1]),Qe=w.visit(R,Se[1]);if(B._getTypeName(G)!==M)throw new Error("TypeError: expected "+M+", received "+B._getTypeName(G));if(B._getTypeName(Qe)!==M)throw new Error("TypeError: expected "+M+", received "+B._getTypeName(Qe));return G>Qe?1:G<Qe?-1:We[0]-Se[0]});for(var je=0;je<re.length;je++)h[je]=re[je][1];return h},_functionMaxBy:function(i){for(var h=i[1],w=i[0],R=this.createKeyFunction(h,[f,c]),M=-1/0,B,re,se=0;se<w.length;se++)re=R(w[se]),re>M&&(M=re,B=w[se]);return B},_functionMinBy:function(i){for(var h=i[1],w=i[0],R=this.createKeyFunction(h,[f,c]),M=1/0,B,re,se=0;se<w.length;se++)re=R(w[se]),re<M&&(M=re,B=w[se]);return B},createKeyFunction:function(i,h){var w=this,R=this._interpreter,M=function(B){var re=R.visit(i,B);if(h.indexOf(w._getTypeName(re))<0){var se="TypeError: expected one of "+h+", received "+w._getTypeName(re);throw new Error(se)}return re};return M}};function Ae(i){var h=new st,w=h.parse(i);return w}function gt(i){var h=new at;return h.tokenize(i)}function Ct(i,h){var w=new st,R=new qe,M=new _t(R);R._interpreter=M;var B=w.parse(h);return M.search(B,i)}t.tokenize=gt,t.compile=Ae,t.search=Ct,t.strictDeepEqual=a})(e)})(ws);const Xc=sn({__name:"Path",props:{modelValue:{type:Object,default:()=>({type:"json_path",json_path:"",jmes_path:""})},json:{type:Object,default:()=>Zt.empty()},height:{type:Number,default:0}},emits:["update:modelValue","success"],setup(e,{emit:t}){const r=e,n=xr({get:()=>r.modelValue,set:d=>t("update:modelValue",d)});let a=Ot("");wr(()=>({json:r.json,option:n.value}),async({json:d,option:f})=>{if(d.isError()){a.value=d.error();return}if(d.isEmpty()){a.value="";return}const p=f.json_path.trim()||"",c=f.jmes_path.trim()||"";try{if(f.type==="json_path"&&p!==""){const m=he({path:p,json:d.content()});pr.isObject(m)?a.value=await Wr.simple("json","beautify",m):a.value=m.toString(),t("success");return}if(f.type==="jmes_path"&&c!==""){const m=ws.search(d.content(),c);pr.isObject(m)?a.value=await Wr.simple("json","beautify",m):a.value=m.toString(),t("success");return}}catch(m){a.value=$error(m);return}a.value=""},{immediate:!0,deep:!0});let s=Ot(100);const u=d=>{s.value=d};return(d,f)=>{const p=_e("HelpTip"),c=_e("Input"),m=_e("Align"),j=_e("Editor"),v=_e("HeightResize");return we(),pt("div",null,[fe(m,{direction:"vertical",class:"ctool-json-path",bottom:"default"},{default:Ee(()=>[n.value.type==="json_path"?(we(),ze(c,{key:0,modelValue:n.value.json_path,"onUpdate:modelValue":f[0]||(f[0]=_=>n.value.json_path=_),label:d.$t("json_json_path")},{append:Ee(()=>[fe(p,{link:"https://www.npmjs.com/package/jsonpath-plus"})]),_:1},8,["modelValue","label"])):et("",!0),n.value.type==="jmes_path"?(we(),ze(c,{key:1,modelValue:n.value.jmes_path,"onUpdate:modelValue":f[1]||(f[1]=_=>n.value.jmes_path=_),label:d.$t("json_jmes_path")},{append:Ee(()=>[fe(p,{link:"https://www.npmjs.com/package/jmespath"})]),_:1},8,["modelValue","label"])):et("",!0)]),_:1}),fe(v,{onResize:u,"father-height":e.height,append:[".ctool-json-path"]},{default:Ee(()=>[fe(j,{"model-value":a.value,placeholder:`${d.$t(`json_${n.value.type}`)} ${d.$t("main_ui_output")}`,lang:"json",height:`${s.value}px`},null,8,["model-value","placeholder","height"])]),_:1},8,["father-height","append"])])}}});var an={};const St=function(e){const t={}.constructor,r=[].constructor,n="test".constructor;return e&&e!==null&&e.constructor===t?"OBJECT":e&&e!==null&&e.constructor===r?"ARRAY":e&&e!==null&&e.constructor===n?"STRING":""};function br(e,t){if(St(e)==="ARRAY"){let r=[];for(let n=0;n<e.length;n++){let a=e[n];St(a)==="OBJECT"||St(a)==="ARRAY"?r.push(br(a,t)):r.push(a)}return r}else if(St(e)==="OBJECT"){let r=[],n,a={};if(t===void 0&&(t=!0),n=Object.keys(e).sort(),!t){for(let s=n.length-1;s>=0;s--)r.push(n[s]);n=r}for(let s=0;s<n.length;s++){let u=n[s];if(St(e[u])==="OBJECT")a[u]=br(e[u],t);else if(St(e[u])==="ARRAY"){a[u]=[];for(let d=0;d<e[u].length;d++){let f=e[u][d];St(f)==="OBJECT"||St(f)==="ARRAY"?a[u].push(br(e[u][d],t)):a[u].push(e[u][d])}}else a[u]=e[u]}return a}else throw new Error("must be an object/array")}async function Zc(e,t){return new Promise((r,n)=>{try{const a=br(e,t);r(a)}catch(a){n(a)}})}an.sort=br;an.sortAsync=Zc;const el=async(e,{tab:t=4}={})=>e!==""?await(await Wr.load("json")).set(e,{tab:t}).format("beautify"):"",tl=async e=>e!==""?await(await Wr.load("json")).set(e).format("compress"):"",Tn=(e,t)=>{if(pr.isPlainObject(e)||pr.isArray(e))for(let r in e)if(pr.isPlainObject(e)){let n=e[r];delete e[r],e[Ds(r,t)]=Tn(n,t)}else e[r]=Tn(e[r],t);return e},rl=e=>Fs.decode(e.replace(/\\U[0-9a-fA-F]{4}/g,t=>t.replace("\\U","\\u"))),nl=e=>{if(e!==""){let t="";for(let r=0;r<e.length;r++){let n=e.charAt(r);t+=/[\u4e00-\u9fa5]/.test(n)?"\\u"+n.charCodeAt(0).toString(16):n}return t}return e},Pt={beautify:el,compress:tl,rename:Tn,unicode2zh:rl,zh2unicode:nl,sortAsc(e){return an.sort(e)},sortDesc(e){return an.sort(e,!1)},escape(e){return e.trim().replace(/\\/g,"\\\\").replace(/"/g,'\\"')},clearEscape(e){return e.trim().replace(/\\\\/g,"\\").replace(/\\"/g,'"')}},al=on("span",null,"|",-1),sl=on("span",null,"|",-1),il=on("span",null,"|",-1),vl=sn({__name:"Json",async setup(e){let t,r;const n=Ss(([t,r]=Ts(()=>Ps({input:"",tabs:"common",expand_type:"",option:{schema:{exp:"",option:{}},path:{type:"json_path",json_path:"",jmes_path:""},tab:4,to_object_lang:"Java",from:Os("csv"),to:ks("xml")}},!1)),t=await t,r(),t)),a="default",s=xr(()=>{const v={};return["from","object","to","path","json_schema"].includes(n.current.expand_type)&&(v.display="grid",v.gridTemplateColumns="repeat(2, minmax(0, 1fr))",v.columnGap="5px"),v}),u={tabs(v){n.current.option.tab=v,this.beautify()},getInput(v){return(v||n.current.input).trim()},async beautify(v,_=!0){if(n.current.input=await Pt.beautify(this.getInput(v),{tab:n.current.option.tab}),!_)return n.save();n.success({copy_text:n.current.input})},async compress(){n.current.input=await Pt.compress(this.getInput()),n.success({copy_text:n.current.input})},rename(v){const _=this.getInput();_!==""&&this.beautify(dr.stringify(Pt.rename(dr.parse(_),v)))},sort(v){const _=this.getInput();_!==""&&this.beautify(dr.stringify(Pt[v==="asc"?"sortAsc":"sortDesc"](dr.parse(_))))},unicode2zh(){const v=this.getInput();v!==""&&(n.current.input=Pt.unicode2zh(v),n.success({copy_text:n.current.input}))},zh2unicode(){const v=this.getInput();v!==""&&(n.current.input=Pt.zh2unicode(v),n.success({copy_text:n.current.input}))},escape(){const v=this.getInput();v!==""&&(n.current.input=Pt.escape(v),n.success({copy_text:n.current.input}))},clearEscape(){const v=this.getInput();v!==""&&(n.current.input=Pt.clearEscape(v),n.success({copy_text:n.current.input}))},repair(){const v=this.getInput();v!==""&&(n.current.input=Es(v),n.success({copy_text:n.current.input}))}};wr(()=>n.current.option.from.serialization,v=>{if(!(v.isEmpty()||n.current.expand_type!=="from")){if(v.isError()){n.current.input=v.error();return}u.beautify(v.toJson(),!1)}},{immediate:!0,deep:!0});const d=xr(()=>{try{const v=n.current.input.trim();return v===""?Zt.empty():Zt.formJson(v)}catch(v){return Zt.fromError($error(v))}}),f=v=>{n.current.option.to_object_lang=v},p=v=>{n.current.option.from.value="",n.current.option.from.type=v},c=v=>{n.current.option.to.type=v},m=v=>{n.current.option.path.type=v},j=v=>{if(v!==""&&n.current.expand_type===v){n.current.expand_type="";return}n.current.expand_type=v};return wr(()=>n.current.tabs,v=>{j(["from","object","to","path"].includes(v)?v:"")}),(v,_)=>{const O=_e("SerializeInput"),E=_e("Editor"),$=_e("SerializeOutput"),I=_e("HeightResize"),T=_e("Button"),F=_e("HelpTip"),z=_e("Align"),S=_e("Select"),N=_e("Dropdown"),V=_e("Tabs"),x=_e("Display");return we(),pt("div",null,[fe(I,{append:[".ctool-page-option"]},{default:Ee(({height:L})=>[on("div",{style:Ns(s.value)},[ce(n).current.expand_type==="from"?(we(),ze(O,{key:0,allow:[ce(n).current.option.from.type],height:L,modelValue:ce(n).current.option.from,"onUpdate:modelValue":_[0]||(_[0]=J=>ce(n).current.option.from=J)},null,8,["allow","height","modelValue"])):et("",!0),fe(E,{modelValue:ce(n).current.input,"onUpdate:modelValue":_[1]||(_[1]=J=>ce(n).current.input=J),placeholder:`Json ${v.$t("main_ui_input")}`,lang:"json",height:`${L}px`},null,8,["modelValue","placeholder","height"]),ce(n).current.expand_type==="object"?(we(),ze(qs,{key:1,height:L,json:d.value,onSuccess:_[2]||(_[2]=()=>ce(n).save()),lang:ce(n).current.option.to_object_lang},null,8,["height","json","lang"])):et("",!0),ce(n).current.expand_type==="to"?(we(),ze($,{key:2,allow:[ce(n).current.option.to.type],content:d.value,height:L,onSuccess:_[3]||(_[3]=()=>ce(n).save()),modelValue:ce(n).current.option.to,"onUpdate:modelValue":_[4]||(_[4]=J=>ce(n).current.option.to=J)},null,8,["allow","content","height","modelValue"])):et("",!0),ce(n).current.expand_type==="path"?(we(),ze(Xc,{key:3,height:L,json:d.value,modelValue:ce(n).current.option.path,"onUpdate:modelValue":_[5]||(_[5]=J=>ce(n).current.option.path=J),onSuccess:_[6]||(_[6]=()=>ce(n).save())},null,8,["height","json","modelValue"])):et("",!0),ce(n).current.expand_type==="json_schema"?(we(),ze(Vc,{key:4,height:L,json:d.value,modelValue:ce(n).current.option.schema,"onUpdate:modelValue":_[7]||(_[7]=J=>ce(n).current.option.schema=J),onSuccess:_[8]||(_[8]=()=>ce(n).save())},null,8,["height","json","modelValue"])):et("",!0)],4)]),_:1},8,["append"]),fe(x,{position:"top-right",class:"ctool-page-option",style:{"margin-top":"5px"}},{extra:Ee(()=>[fe(z,null,{default:Ee(()=>[fe(T,{onClick:_[9]||(_[9]=L=>u.repair()),type:"primary",size:"small",text:v.$t("json_repair")},null,8,["text"]),fe(F,{link:"https://www.npmjs.com/package/jsonrepair"})]),_:1})]),default:Ee(()=>[fe(V,{modelValue:ce(n).current.tabs,"onUpdate:modelValue":_[18]||(_[18]=L=>ce(n).current.tabs=L),lists:[{label:v.$t("json_common"),name:"common"},{label:"Path",name:"path"},{label:v.$t("json_object"),name:"object"},{label:v.$t("json_from"),name:"from"},{label:v.$t("json_to"),name:"to"}]},{default:Ee(()=>[fe(z,null,{default:Ee(()=>[fe(T,{onClick:_[10]||(_[10]=L=>u.beautify())},{default:Ee(()=>[hn(ya(v.$t("json_format")),1)]),_:1}),fe(S,{"model-value":ce(n).current.option.tab,onChange:_[11]||(_[11]=L=>u.tabs(L)),placeholder:v.$t("json_format"),options:ce(Vs)},null,8,["model-value","placeholder","options"]),fe(T,{onClick:_[12]||(_[12]=L=>u.compress())},{default:Ee(()=>[hn(ya(v.$t("json_compress")),1)]),_:1}),al,fe(N,{onSelect:_[13]||(_[13]=L=>u[L]()),placeholder:v.$t("json_escape"),options:[{label:v.$t("json_add_escape"),value:"escape"},{label:v.$t("json_clear_escape"),value:"clearEscape"}]},null,8,["placeholder","options"]),fe(N,{onSelect:_[14]||(_[14]=L=>u[L]()),placeholder:"Unicode",options:[{label:v.$t("json_unicode_to_zh"),value:"unicode2zh"},{label:v.$t("json_zh_to_unicode"),value:"zh2unicode"}]},null,8,["options"]),sl,fe(N,{onSelect:_[15]||(_[15]=L=>u.sort(L)),placeholder:v.$t("json_key_sort"),options:[{label:v.$t("json_asc"),value:"asc"},{label:v.$t("json_desc"),value:"desc"}]},null,8,["placeholder","options"]),fe(N,{onSelect:_[16]||(_[16]=L=>u.rename(L)),placeholder:v.$t("json_key_rename"),options:ce(As)},null,8,["placeholder","options"]),il,fe(T,{onClick:_[17]||(_[17]=L=>j("json_schema"))},{default:Ee(()=>[hn("Schema")]),_:1})]),_:1}),fe(z,null,{default:Ee(()=>[(we(!0),pt(xt,null,Ur(ce(Ls),L=>(we(),ze(T,{size:a,text:L.label,type:L.value===ce(n).current.option.path.type?"primary":"general",onClick:J=>m(L.value)},null,8,["text","type","onClick"]))),256))]),_:1}),fe(z,null,{default:Ee(()=>[(we(!0),pt(xt,null,Ur(ce(zs),L=>(we(),ze(T,{size:a,type:L===ce(n).current.option.to_object_lang?"primary":"general",text:L,onClick:J=>f(L)},null,8,["type","text","onClick"]))),256))]),_:1}),fe(z,null,{default:Ee(()=>[(we(!0),pt(xt,null,Ur(ce(Cs),L=>(we(),pt(xt,null,[L!=="json"?(we(),ze(T,{key:0,size:a,type:L===ce(n).current.option.from.type?"primary":"general",text:v.$t(`component_serialize_type_${L}`),onClick:J=>p(L)},null,8,["type","text","onClick"])):et("",!0)],64))),256))]),_:1}),fe(z,null,{default:Ee(()=>[(we(!0),pt(xt,null,Ur(ce(Is),L=>(we(),pt(xt,null,[L!=="json"?(we(),ze(T,{key:0,size:a,type:L===ce(n).current.option.to.type?"primary":"general",text:v.$t(`component_serialize_type_${L}`),onClick:J=>c(L)},null,8,["type","text","onClick"])):et("",!0)],64))),256))]),_:1})]),_:1},8,["modelValue","lists"])]),_:1})])}}});export{vl as default};
